<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>会员管理</title>
    <!--    <link rel="stylesheet" type="text/css" href="../../stylesheets/select.css"/>-->
<!--    <link rel="stylesheet" type="text/css" href="../../stylesheets/table.css"/>-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/table.css"/>
    <script type="text/javascript" src="../../iframe_d/iframe_d.js"></script>
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        html,
        body {
            height: 100%;
            zoom: 0.9;
        }

        #app {
            height: 100%;
        }

        li {
            list-style: none;
        }

        .leftnav {
            width: 5%;
            background-color: #1DBce0;
            height: 100%;
            float: left;
        }

        .leftnav li {
            width: 100%;
            height: 65px;
            text-align: center;
            line-height: 65px;
            border-bottom: 1px solid white;
            color: white;
        }

        .order {
            width: 30%;
            float: left;
            position: relative;
        }

        .order .order-nav {
            border-bottom: 1px solid black;
            overflow: hidden;
            /*  浮动的隐藏 */
        }

        .order-nav li {
            width: 60px;
            height: 42px;
            float: left;
            text-align: center;
            line-height: 42px;
        }

        .order-nav .active {
            color: #1DBce0;
        }

        .order .border {
            width: 60px;
            height: 3px;
            background-color: #1DBce0;
            position: absolute;
            top: 39px;
            transition: left 0.5s;
            /*过渡动画*/
        }

        .oftergoods,
        .typegoods {
            width: 65%;
            float: right;
        }

        .oftergoods {
            overflow: hidden;
        }

        .oftergoods h3 {
            height: 42px;
            border-bottom: 1px solid black;
            line-height: 42px;
        }

        .oftergoods ul {
            padding-top: 30px;
            padding-left: 50px;
        }

        .oftergoods ul li {
            width: 120px;
            height: 38px;
            float: left;
            background-color: antiquewhite;
            border: 1px solid blue;
            margin-right: 30px;
            margin-bottom: 30px;
            line-height: 38px;
            text-align: center;
            padding: 4px;
        }

        .typegoods {
            position: relative;
        }

        .typegoods .typegoods-nav {
            border-bottom: 1px solid black;
            overflow: hidden;
            /*  浮动的隐藏 */
            margin-bottom: 30px;
        }

        .typegoods-nav li {
            width: 60px;
            height: 42px;
            float: left;
            text-align: center;
            line-height: 42px;
        }

        .typegoods-nav .active {
            color: #1DBce0;
        }

        .typegoods .border {
            width: 60px;
            height: 3px;
            background-color: #1DBce0;
            position: absolute;
            top: 39px;
            transition: left 0.5s;
            /*过渡动画*/
        }

        .typegoods .goods {
            width: 200px;
            height: 68px;
            border: 1px solid blue;
            float: left;
            margin-right: 30px;
            background-color: palegoldenrod;
        }

        .typegoods .goods img {
            width: 80px;
            height: 60px;
            float: left;
        }

        .typegoods .goods p {
            line-height: 60px;
        }

        /*点单界面的样式优化2023/1/12-z*/
        .index .Rblock .Bmenu .hover .menu-a{
            background-color: #fff;
            color: #0AA0F6;
        }
        .modal{position:fixed;top:0;left:0;z-index:1050;display:none;width:100%;height:100%;overflow:hidden;outline:0}
        #jiezhang{
            width: 97%;
            height: 850px;
            background-color: white;
            left: 50%;
            align-items: center;    /* 垂直居中 */
            top: 3%;
            /*background-image: url('..img//icons/logo.png');*/
            /*background-image: url('https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500');*/
            background-image: url('../../images/diandan.webp');
            background-size: cover;
            /*background-image: url('../images/截图20250116132521.png');*/
            transform: translateX(-50%);
            border: 1px solid white;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        .modal-header{
            height: 36px;
            width: 100%;
            margin: 5px auto;
            font-size: 22px;
            background-color: #7ea1f1;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #zheko .modal-header{
            width: 97%;
        }
        .modal-title-left{
            height: 100%;
            line-height: 36px;
            margin-left: 15px;
            font-size: 18px;
        }
        .modal-title-right{
            height: 100%;
            line-height: 36px;
            margin-right: 15px;
            margin-top: 10px;
        }
        .modal-title>img{
            width: 26px;
            height: 26px
        }
        .modal-content-left{
            float: left;
            width: 450px;
            height: 650px;
            background-color: white;
            /*background-color: #1693ff;*/

            margin: 0px 4px 36px 0px;
            border-radius: 6px;
        }

        /*.itemName1{*/
        /*    transform: translateX(-4px);*/
        /*}*/
        /*.itemNum1{*/
        /*    transform: translateX(-18px);*/
        /*}*/
        /*.itemAmount1{*/
        /*    transform: translateX(-36px);*/
        /*}*/
        /*.itemzheko{*/
        /*    transform: translateX(-17px);*/
        /*}*/
        /*.title>.table thead >.itemName1 {*/
        /*    transform: translateX(-5px);*/
        /*}*/
        /*.title>.table thead >.itemNum1{*/
        /*    transform: translateX(18px);*/
        /*}*/
        /*.title>.table thead >.itemAmount1 {*/
        /*    transform: translateX(36px);*/
        /*}*/
        /*.title>.table thead >.itemzheko{*/
        /*    transform: translateX(17px);*/
        /*}*/
        .modal-content-center{
            float:left;
            width: 90px;
            height: 650px;
            /*background-color: #ffc800;*/
            background-color: rgb(0 135 187 / 20%);
            /*margin: 13px 4px 10px 12px;*/
            border-radius: 15px;
            margin-left:12px;
        }
        #but4,#but5,#but6,#but78,#but79{
            width: 80%;
            height: 84px;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            position: relative;
            margin: 0 auto;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        #but4 img, #but5 img,#but6 img, #but78 img,#but79 img{
            width: 76%;
            height: 62%;
            margin: 5px auto;
        }
        .modal-content-right{
            float:right;
            display:inline-block;
            width: 550px;
            height: 650px;
            /*background-color: #dfe79a;*/
            background-color: rgb(0 135 187 / 20%);
            /*margin: 13px 14px 10px 0px;*/
            border-radius: 15px;
        }
        .choose_member_head{
            width: 95%;
            height: 37px;
            background: #e1f92d url(http://zkwsoft.cn/qtye/img/png_search.png) no-repeat 1% center;
            border-radius: 10px;
            margin: 10px auto;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .choose_member_head input{
            border-style: none;
            margin-left: 25px;
            width: 87%;
            height: 100%;
            background-color: transparent;
            outline: none;
        }
        .choose_member_head a{
            position: absolute;
            line-height: 34px;
            right: 50px;
            text-decoration: underline;
            width: 66px;
            font-size: 14px;
            color: blue;
        }
        modal-content-right .choose_member>div{
            width: 380px;
            background-color: #EBEBEB;
            margin: auto;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }
        .member-info{
            height: 25px;
            display: flex;
            background-color: #EBEBEB;
            padding: 0 10px;
            color: #777;
        }
        .detailed_info{
            padding: 5px 25px;
            font-size: 13px;
            color: #9c9c9c;
            height: 48px;
        }
        .list{
            height: 120px;
            padding: 0 25px;
            font-size: 18px;
            margin-top: 10px;
            font-weight: bold;
        }
        .couponHint {
            display: flex;
            flex-direction: row;
            height: 30px;
            justify-content: space-between;
            align-items: center;
            padding: 0px 10px;
            border-top: 1px solid #eee;
            color: #0a0909;
            width: 90%;
            margin: 0px auto;
            font-size: 14px;
        }
        .pay_type{
            display: flex;
            height: 98px;
            flex-wrap: wrap;
            align-items: center;
            align-content: flex-start;
            padding: 10px 0;
            width: 95%;
            margin: 0 auto;
        }
        .pay_type>div{
            width: 91px;
            height: 30px;
            border: 1px solid #A4A4A4;
            border-radius: 5px;
            background-color: #FAFAFA;
            text-align: center;
            line-height: 30px;
            /* margin-right: 40px; */
            margin: 2px 4px;
            /* margin-bottom: 3px; */
            cursor: pointer;
            font-size: 14px;
        }
        .calculate{
            width: 92%;
            margin: 0 auto;
            margin-top: 70px;
        }
        .calculate table.table tr td:not(:last-child) {
            border: 1px solid #9c9c9c;
            font-weight: 600;
            color: #000;
            width: 84px;
            height: 58px;
            line-height: 58px;
            cursor: pointer;
        }
        .calculate table.table tr td:last-child {
            color: #dc9efe;
            border: 1px solid #9c9c9c;
            font-weight: 600;
            cursor: pointer;
        }
        .calculate table.table tr:first-child td.settle_finish {
            cursor: pointer;
            border-radius: 0;
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
            margin: 0;
            padding: 0;
            border: unset;
            outline: unset;
            background-color: #2890ff;
            font-size: 16px;
        }
        #zheko{
            left: 50%;
            top: 18%;
            transform: translateX(-50%);
            width: 600px;
            height: 400px;
            background-color: #F7F7F7;
            border: 1px solid white;
            border-radius: 9px;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        .zhekou_content{
            width: 97%;
            background: #fff;
            margin: 5px auto;
            border-radius: 6px;
            height: 265px;
            overflow: hidden;
        }
        .border-top{
            width: 97%;
            height: 60px;
            background-color: white;
            margin: 9px auto;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .border-top > label{
            margin-left: 15px;
            font-size: 13px;
        }
        .border-top > label>input{
            margin-right: 15px;
        }
        #qb_xz{
            outline: none;
            border: 1px solid #9c9c9c;
            height: 33px;
            border-radius: 6px;
            padding: 0 8px;
        }
        /*.itemxuanzhe{*/
        /*    transform: translateX(20px);*/
        /*}*/
        /*.itemName2{*/
        /*    transform: translateX(37px);*/
        /*}*/
        /*.itemNum2{*/
        /*    transform: translateX(-1px);*/
        /*}*/
        /*.itemAmount2{*/
        /*    transform: translateX(-43px);*/
        /*}*/
        /*.itemzheko{*/
        /*    transform: translateX(-21px);*/
        /*}*/
        /*.zhekou_content .title .table thead >.itemName2,*/
        /*.zhekou_content .title .table thead >.itemAmount2{*/
        /*    transform: translateX(0px);*/
        /*}*/
        #beizhu{
            width: 35%;
            height: 232px;
            margin: auto;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
            border-radius: 10px;
        }
        .modal-body{
            width: 96%;
            margin: 6px auto;
        }
        .index .jiezhang_mask{
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            border: none;
            border-radius: 0;
        }
        .con1{
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
        }
        #table1 tr td:not(:first-child){
            width: 103px;
            text-align: center;
        }
        #table2 tr td:not(:nth-child(2)){
            width: 89px;
            text-align: center;
        }
        #huiyuan{
            left: 50%;
            top: 18%;
            transform: translateX(-50%);
            width: 600px;
            height: 400px;
            background-color: #F7F7F7;
            border: 1px solid white;
            border-radius: 9px;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        #huiyuan .modal-header{
            width: 97%;
        }
        #huiyuan .modal-body > div{
            background-color: #fff;
        }
    </style>
</head>
<style>
    /* 公共 */

    body {
        padding: 0;
        margin: 0;
        background: #fff;
        overflow-y: scroll;
    }

    thead, tr, th, td {
        border: 0;
        margin: 0;
        padding: 0;
        /*width: 318px;*/
        background-color: #ffffff;
        vertical-align: baseline;
        height: 37px;
        line-height: 37px;
        color: #000000;
    }

    a {
        text-decoration: none;
        color: #000;
    }

    ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .index {
        display: flex;
        height: 98%;
        width: 98%;
        background-color: #f7f7f7;
        /*background-image: url('https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500');*/
        background-image: url('../../images/diandan.webp');
        background-size: cover;
        padding: 12px;
    }

    .Lmenu {
        width: 20px;
        /*background: rgb(62, 35, 236);*/
    }

    .Lmenu .left {
        display: flex;
        flex-flow: column;
        min-height: 100vh;
        background: rgb(62, 35, 236);
    }

    .Lmenu ul li {
        text-align: center;
        margin-top: 14px;
        height: 68px;
        border-bottom: 1px solid #fff;
    }

    .Lmenu ul li a {
        color: #fff;
    }

    .Lmenu ul li .img {
        width: 50%;
        margin: 0 auto;
    }

    .Lmenu ul li img {
        width: 100%;
    }

    .Lblock {
        /*flex:1;*/
        /*width: 350px;*/
        /*margin-left: 10px;*/
        /*margin-right: 10px;*/
        /*min-height: 600px;*/
        flex: 2;
        display: flex;
        flex-direction: column;
        height: 91%;
        min-width: 320px;
        margin-right: 10px;
        color: #9c9c9c;
    }

    .Lblock table{
        table-layout: fixed;
    }

    .table{
        width: 97%;
        max-width: 97%;
        text-align: center;
    }

    table{
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
    }

    .Lblock .room_info{
        height: 50px;
        display: flex;
    }

    .Lblock .title{
        border-top: 1px solid #ccc;
        border-bottom: 1px solid #ccc;

    }

    .Lblock .title .itemOrderNO，
    .Lblock .cont .table tbody .itemOrderNO{
        text-align: center;
        width: 50px;
    }

    .Lblock .title .itemName，
    .Lblock .cont .table tbody .itemName{
        text-align:left;
    }

    .Lblock .title .itemNum，
    .Lblock .cont .table tbody .itemNum{
        text-align: center;
        width: 60px;
    }

    .Lblock .title .itemAmount,
    .Lblock .cont .table tbody .itemAmount{
        /*text-align: right;*/
        width: 60px;
    }

    .Lblock .room_info h4{
        font-weight: 400;
        margin: 0 5px 0 12px;
        width: 155px;
        line-height: 50px;
        color: #1a1515;
    }
    .Lblock #empty_mask{
        flex: 1;
        overflow: hidden;
        /*width: 318px;*/
    }

    .Lblock .menu ul {
        display: flex;
        border-bottom: 2px solid darkgrey;
    }

    .Lblock .menu ul li {
        font-size: 14px;
        margin-right: 50px;
        margin-top: 5px;
        line-height: 45px;
        text-align: center;
        border-bottom: 2px solid darkgrey;
        margin-bottom: -2px;
    }

    .Lblock .menu ul li.hover {
        border-bottom: 2px solid rgb(49, 0, 247);
    }

    .Lblock .menu ul li.hover a {
        color: rgb(32, 32, 246);
    }

    .Lblock .menu ul li:hover {
        border-bottom: 2px solid rgb(49, 0, 247);
    }

    .Lblock .menu ul li:hover a {
        color: rgb(32, 32, 246);
    }

    .Lblock .table {
        margin-top: 1px;
        /*height: 87%;*/
    }

    .Lblock .table .title {
        display: flex;
        margin-top: 10px;
    }

    .Lblock .table .title li {
        width: 100%;
        border: 1px solid darkgrey;
        border-left: none;
        border-right: none;
        height: 50px;
        font-size: 16px;
        font-weight: bold;
        line-height: 50px;
        text-align: center;
        /* padding-left: 8px; */
        color: #606060;
    }

    .Lblock #empty_mask .cont .table tbody tr{
        height: 40px;
        color: #000;
        /*background-color: #ebe9e9;*/
        text-align: center;
        background-color:rgb(188 209 253);
    }

    .Lblock #empty_mask .cont > table tbody tr{
        cursor: pointer;
    }

    /*.table-hover>tbody>tr:nth-of-type(odd){*/
    /*    background-color: #f9f9f9;*/
    /*}*/


    /*.Lblock .table .title li:last-child {*/
    /*    border-right: 1px solid darkgrey;*/
    /*}*/

    .Lblock #empty_mask .cont {
        /* width: 107%; */
        /*overflow-y: auto;*/
        height: 100%;
        /* width: calc(100% + 17px);*/
    }

    .Lblock #empty_mask .cont table{
        table-layout: fixed;
        /*width: 94%;*/
    }

    .Lblock .table .cont li {
        display: flex;
        background-color: lime;
        color: white;
    }

    .Lblock .cont li div {
        width: 100px;
        border: 1px solid darkgrey;
        border-right: 0;
        border-top: 0;
        height: 30px;
        line-height: 30px;
        padding-left: 8px;
        color: #606060;
        display: flex;
    }

    .Lblock .table .cont li div:last-child {
        border-right: 1px solid darkgrey;
    }

    .Lblock .table .cont li span {
        width: 22px;
        text-align: center;
        cursor: pointer;
        margin: 6px 5px;
        color: white;
        background-color: #ea2929;
        border-radius: 50%;
        font-size: 6px;
        font-weight: 600;
        border: 1px solid white;
        line-height: 13px;
        transition: .3s;
    }
    .Lblock .table .cont li span:hover{
        color: #ea2929;
        background-color: white;
        border: 1px solid #ea2929;
    }

    .Lblock .end {
        margin-top: 8px;
        padding: 9px 10px;
        height: 38px;
        font-size: 15px;
        display: flex;
        color: #222;
        border-top: 1px solid #f5f5f5;
        justify-content: space-between;
    }
    .Lblock .end span{
        color: red;
    }

    .Lblock .end .count,
    .Lblock .end .price_total{
        color: red;
    }

    .Lblock .button {
        display: flex;
        justify-content: center;
        margin-top: 10px;
        flex-direction: row;
        height: 50px;
    }

    .Lblock .button button {
        height: 42px;
        line-height: 42px;
        width: 72px;
        text-align: center;
        border: 0px;
        border-radius: 5px;
        cursor: pointer;
        margin: 0 10px;
        font-size: 16px;
    }

    .Lblock .button .but1 {
        color: #fff;
        background: rgb(231 192 63);
    }

    .Lblock .button .but2 {
        color: #fff;
        transition: .3s;
        flex: 0 50%;
        background-color: #ff0000b8;
        border-radius: 10px;
        box-shadow: 0px 5px 8px rgb(0 0 0 / 20%);
        font-weight: normal;
    }

    .Lblock .button > button{
        margin-bottom: 10px;
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #FFCF3D;
        font-weight: bold;
    }

    /*.Lblock .button .but2:hover{*/
    /*    color: rgb(246 103 103);*/
    /*    background-color: #5e5e5e;*/
    /*    border: 1px solid rgb(246 103 103);*/
    /*}*/

    .Lblock .button .but3 {
        color: #fff;
        transition: .3s;
        background-color: #0aa0f6;
        border-radius: 10px;
        box-shadow: 0px 5px 8px rgb(0 0 0 / 20%);
        font-weight: normal;
    }
    .index >div{
        padding: 27px;
        /*background-color: #ffffff;*/
        background-color: rgb(0 135 187 / 20%);
        border: 1px solid #ececec;
        border-radius: 15px;

    }

    .btn{
        display: inline-block;
        padding: 6px 12px;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -ms-touch-action: manipulation;
        touch-action: manipulation;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background: #dce104;
        border: 1px solid transparent;
        margin-right: 10px;
        border-radius: 5px;
        width: 120px;
        height: 34px;
    }

    .btns{
        flex: 1;
        max-width: 130px;
        margin-right: 10px;
        height: 91%;
    }

    .btns>div{
        margin-top: 10px;
        height: 40px;
    }

    .btns button{
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #0aa0f6;
        font-weight: normal;
        font-size: 16px
    }

    hr {
        margin-top: 20px;
        margin-bottom: 20px;
        border: 0;
        border-top: 1px solid #eee;
    }

    .btns .jia{
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #fdc139;
        font-weight: normal;
        font-size: 16px;
    }

    .btns .jian{
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color:#fff;
        font-weight: normal;
        font-size: 16px;
    }

    .Rblock {
        flex: 7;
        display: flex;
        flex-direction: column;
        height: 91%;
        overflow: hidden;
        min-width: 547px;
    }

    body{
        /*background: url(" ");*/
    }

    .Rblock .head {
        height: 50px;
        line-height: 50px;
        padding-left: 10px;
        border-bottom: 1px solid darkgray;
    }

    .Rblock .option {
        display: flex;
        margin: 10px;
        font-size: 14px;
        flex-wrap: wrap;
    }

    .Rblock .option li {
        cursor: pointer;
        padding: 0 10px;
        height: 36px;
        line-height: 36px;
        text-align: center;
        border: 1px solid darkgrey;
        margin: 5px;
    }

    .Rblock .Bmenu {
        position: relative;
        display: flex;
        margin: 5px auto;
        height: 53px;
        width: 97%;
        /* border-bottom: 2px solid #0AA0F6; */
        background-color: #0AA0F6;
        box-shadow: 0px 5px 8px rgb(10 160 246 / 30%);
        border-radius: 12px;
    }

    .Rblock .Bmenu .preMenu{
        /*flex: 1;*/
        position:absolute;
        left: 5px;
        width: 35px;
        height: 35px;
        margin: 0 5px;
        line-height: 55px;
    }
    .Rblock .Bmenu .nextMenu{
        /*flex: 1;*/
        width: 35px;
        height: 35px;
        position: absolute;
        right: 5px;
        line-height: 55px;
    }
    .Rblock .Bmenu .menu{
        /*flex: 7;*/
        display: flex;
        justify-content: flex-start;
    }

    .Rblock .Bmenu li {
        /*margin-right: 38px;*/
        margin-bottom: -2px;
    }

    .Rblock .Bmenu .hover {
        line-height: 36px;
        padding: 8px 2px;
        transition: .3s;
    }

    /*.Rblock .Bmenu li.hover:hover{*/
    /*    !*background-color: #077027;*!*/
    /*    !*border-bottom: 2px solid lime;*!*/
    /*}*/

    .Rblock .Bmenu .hover .menuType {
        /*color: rgb(32, 32, 246);*/
        color: white;
        font-size: 17px;
        font-weight: 400;
        padding: 7px 20px;
        /*background-color: #0AA0F6;*/
        border-radius: 17px;
        transition: .3s;
    }

    .menuType-active{
        background-color: #ffffff;!important;
        color: #0AA0F6;!important;
    }
    /*.Rblock .Bmenu li.hover a:hover{*/
    /*    color: white;*/
    /*    background-color: #077027;*/
    /*}*/
    /*active{*/
    /*    color: white;*/
    /*    background-color: #077027;*/
    /*}*/

    /*.Rblock .Bmenu li:hover {*/
    /*    border-bottom: 2px solid rgb(49, 0, 247);*/
    /*}*/

    /*.Rblock .Bmenu li:hover a {*/
    /*    color: rgb(32, 32, 246);*/
    /*}*/

    .Rblock .Bmenu li:first-child {
        margin-left: 11px;
    }

    .Rblock .block {
        display: flex;
        flex-wrap: wrap;
        margin: 12px auto;
        width: 98%;
    }

    .Rblock .block li {
        display: flex;
        border: 1px solid darkgrey;
        width: 244px;
        min-height: 72px;
        margin: 5px 5px 10px;
        cursor: pointer;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 2px 2px 4px rgb(0 0 0 / 50%);
        transition: .3s;
        font-weight: 400;
    }
    .Rblock .block li:hover{
        transform: translateY(-5px);
    }

    .Rblock .block li .img {
        width: 55%;
        height: 118px;
    }

    .Rblock .block li img {
        width: 100%;
        height:100%;
    }

    .product_details{
        width: 48%;
        font-size: 20px;
        justify-content: space-between;
        /*color: rgb(63, 175, 255);*/
        padding: 8px;
    }

    .Rblock .block li .title {
        color: rgb(0, 0, 0);
        /*margin-left: 10px;*/
        margin-top: 14px;
        text-align: center;
    }

    .Rblock .block li .money {
        margin-top: 36px;
        margin-right: 0;
        color: rgb(255, 0, 0);
        text-align: center;
    }

    #empty_mask {
        /*border-left: 1px solid darkgrey;*/
        /*border-right: 1px solid darkgrey;*/
        text-align: center;
        line-height: 72px;
        height: 75%;
        text-align: center;
        line-height: 23em;
        color: darkgrey;
    }

    .room_info #danhao{
        height: 36px;
        transition: .3s;
        margin-top: 8px;
        font-size: 20px;
        border: none;
    }
    .room_info #danhao1{
        height: 36px;
        transition: .3s;
        margin-top: 8px;
        font-size: 20px;
        border: none;
    }

    .room_info #danhao:focus{
        outline: #006eb0;
    }

    .Lblock .table .cont li div.none {
        display: none;
    }
    /* 容器样式 */
    .Lblock .table .cont li {
        list-style-type: none; /* 移除默认的列表样式 */
        padding: 10px;         /* 添加内边距 */
        margin: 5px 0;         /* 添加外边距 */
        border-bottom: 1px solid #ddd; /* 添加下边框 */
    }

    /* 隐藏具有特定类名的 div 元素 */
    .Lblock .table .cont li div.none {
        display: none;
    }

    /* 可选：为显示的 div 元素添加样式 */
    .Lblock .table .cont li div {
        padding: 5px;
        background-color: rgba(234, 234, 254, 0.88); /* 背景色 */
        border: 1px solid #3b7ddd;    /* 边框 */
        margin-top: 5px;           /* 上边距 */
    }

    .none {
        display: none;
    }

    .form_input{
        width: 180px;
        height: 30px;
        outline: none;
        /*border: 1px solid #b7aec7;*/
        border-radius: 3px;
        padding-left: 8px;
        font-size: 19px;
        margin-top: 11px;
        border: none;
    }
    .detailed_info > p:not(:first-child) {
        width: 100%;
        height: 35px;
        font-size: 19px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #000000;
        background-color: #ffb099;
        padding: 0 -2 10px;
        border-radius: 6px;
    }
    .modal-body .search input{
        outline: none;
        line-height: 1.5;
        width: 96%;
        height: 26px;
        border-radius: 10px;
        background: #ebebeb url(http://zkwsoft.cn/qtye/img/png_search.png) no-repeat right center;
        border: 1px solid #ccc;
        padding: 6px 12px;
        font-size: 14px;
        color: #555;
    }
    .modal-body .member-list{
        height: 244px;
        over-flow-y:scroll;
    }
    .modal-footer{
        padding: 15px;
        text-align: right;
        border-top: 1px solid #e5e5e5;
    }
    .pagination{
        display: inline-block;
        padding-left: 0;
        border-radius: 4px;
    }
    .pagination >li{
        display: inline;
    }
    .pagination>li>a{
        position: relative;
        float: left;
        padding: 6px 12px;
        border: 1px solid #ddd;

    }
    .pagination >li:first-child>a{
        margin-left: 0;
        border-top-left-radius: 4px;
        border-bottom-right-radius: 4px;
    }
    .huiyuan_footer_close{
        color: #fff;
        background-color: #118eeb;
        padding: 6px 36px;
        display: inline-block;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        border: 1px solid transparent;
        border-radius: 5px;
        height: 34px;
        vertical-align: middle;
    }
    #Product_detail{
        width: 700px;
        height: 500px;
        background-color: #F7F7F7;
        /* margin: 10vh; */
        /*background-image: url("https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500");*/
        background-image: url('../../images/diandan.webp');
        background-size: cover;
        left: 50%;
        top: 10%;
        transform: translateX(-50%);
        /* transform: translateY(-50%); */
        border: 1px solid white;
        box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
    }
    .details_modal-content{
        /*border: 1px solid;*/
        width: 100%;
        height: 79%;
        background-color: rgb(0 135 187 / 20%);
        /*background: yellow;*/
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .modal-content-l{
        /*border: 1px solid;*/
        width: 10000%;
        height: 97%;
        /*background: green;*/
        border-radius: 6px;
        flex-grow: 1;
        margin-left: 0px;
        overflow: hidden;
        /*background:url('https://img0.baidu.com/it/u=1779250852,1799309111&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=889') no-repeat center;*/
        /*background-size: 265px 483px;*/
    }
    .modal-content-l img{
        width: 100%;
        height: 100%;
        /*transform: translateX(-302px);*/
    }
    .modal-content-r-header{
        width: 100%;
        height: 27px;
        text-align: center;
        margin: 5px auto;
        font-weight: 600;
    }
    .modal-content-r{
        width: 10000%;
        height: 90%;
        /*background: blue;*/
        flex-grow: 1;
        padding: 10px 20px;
        margin-left: 23px;
    }
    .modal-footer .Product_details_close ,
    .modal-footer .Product_details_Ok{
        color: #fff;
        background-color: #118eeb;
        padding: 6px 36px;
        display: inline-block;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        border: 1px solid transparent;
        border-radius: 5px;
        height: 34px;
        vertical-align: middle;
    }
    .product_details_type,
    .product_details_count,
    .product_details_specification,
    .product_details_flavor,
    .product_details_price{
        margin-top: 20px;
        height: 45px;
        line-height: 45px;
    }
    .product_details_type input,
    .product_details_count input,
    .product_details_price input{
        height: 29px;
        border:none;
        border-radius: 6px;
        outline: none;
        padding: 2px 7px;
        margin-left: 10px;
        font-size: 16px;
        text-align: center;
    }
    .product_details_specification select,
    .product_details_flavor select{
        width: 210px;
        text-align: center;
        height: 31px;
        border-radius: 6px;
        border: none;
        margin-left: 10px;
        outline: none;
    }
    .modal-content-r-content{
        color: #000;
    }
    .product_details_id{
        display: none;
    }
    .memeber_info{
        width: 91%;
        height: 37px;
        border-radius: 10px;
        margin: 10px auto;
        display: flex;
        justify-content: space-around;
        align-items: center;
        background: #EBEBEB;
    }
    #huiyuan_table tbody td{
        cursor: pointer;
    }

</style>

<body>
<div class="index">
<!--    <input type="hidden" value="{{datas2 }}" id="datas2">-->
<!--    <div class="Lmenu">-->
<!--    </div>-->

    <div class="Lblock">
<!--        <div class="menu">-->
<!--            <ul>-->
<!--            </ul>-->
<!--        </div>-->
<!--        <div class="table">-->
        <div class="room_info">
            <h4>消费单号：</h4>
            <div class="input_order" style="width: 300px;">
                <input class="form_input" id="danhao" name="danhao" value=""/>
            </div>
        </div>
<!--           <div class="title">-->
<!--               <li style="border-radius:15px 0px 0px 0px">商品名称</li>-->
<!--               <li>数量</li>-->
<!--               <li>金额</li>-->
<!--               <li style="border-radius:0px 15px 0px 0px">操作</li>-->
<!--           </div>-->
        <div class="title" style=" color: #75c0ff;">
            <table class="table">
                <thead>
                    <tr>
                        <td class="itemOrderNO" style="width: 68px">序号</td>
                        <td class="itemName" style="width: 68px">商品名称</td>
                        <td class="itemNum" style="width: 68px">数量</td>
                        <td class="itemAmount" style="width: 41px">金额</td>
                    </tr>
                </thead>
            </table>
        </div>
        <div id="empty_mask">
            <div class="cont">
                <table id="table" class="table table-hover">
                    <tbody>
<!--                        //自动添加商品-->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="end">
            <div>
                合计数量:
                <span class="count">0</span>
            </div>
            <div>
                合计金额:
                <span>
                    ￥
                    <span class="price_total">
                        0.00
                    </span>
                </span>

            </div>
        </div>
        <div class="button">
            <button class="but2" btnflag="cancel">作废</button>
            <button id="but3" class="but3">结账</button>
        </div>


    </div>
    <div class="btns" >

        <!--<div>-->
            <!--<li target="main"><img src="../images/企业微信截图_1737706980108.png" style="width:35px;height: 35px"></li>-->
        <!--</div>-->
        <div>
            <button id="jia" class="btn jia">+</button>
        </div>
        <div>
            <button id="jian" class="btn jian">-</button>
        </div>
        <div>
            <button id="is_zengsong" class="btn is_zengsong">赠送</button>
        </div>
    </div>
    <div class="Rblock">
        <div class="Bmenu">
            <div class="menu">
                <li class="hover">
                    <a href="#" class="menuType menu-a" id="Bmenu_showAll">全部</a>
                </li>
                {% for item in types %}
                <li class="hover">
                    <a href="#" class="menuType">{{item.type}}</a>
                </li>
                {% endfor %}
            </div>
        </div>
        <ul class="block">

            {% for item in datas %}
            <li>
                <div class="img">
                    <img src="{{item.photo}}" alt="">
                </div>
                <div class="product_details">
                    <div class="title">
                        {{item.product_name}}
                    </div>
                    <div class="money">￥<span>{{item.price.split(",")[0]}}</span>元</div>
                </div>
                <div class="none id">{{item.id}}</div>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!--    遮罩层-->
    <div class="jiezhang_mask"></div>
    <!--    商品详情窗口-->
    <div id="Product_detail" class="modal fade">
        <div class="modal-header" id="Product_detail_move">
            <div class="modal-title modal-title-left">商品详情</div>
            <div class="modal-title modal-title-right" onclick="jQuery('#Product_detail').hide();jQuery('.jiezhang_mask').hide()">
                <img src="../../images/guanbi.png">
            </div>
        </div>
        <div class="modal-body"></div>
        <div class="details_modal-content">
            <!--            商品图片栏-->
            <div class="modal-content-l">

            </div>
            <!--            商品选项栏-->
            <div class="modal-content-r">
                <div class="modal-content-r-header">
                    商品名称
                </div>
                <div class="modal-content-r-content">
                    <div class="product_details_type">
                        商品类型
                        <input id="xiangqing_type" type="text" value="">
                    </div>
                    <div id="product_details_count" class="product_details_count">
                        商品数量
                        <input type="text" value="">
                    </div>
                    <div id="product_details_specification" class="product_details_specification">
                        商品规格
                        <select>

                        </select>
                    </div>
                    <div class="product_details_flavor">
                        商品口味
                        <select>

                        </select>
                    </div>
                    <div class="product_details_price">
                        商品价格
                        <input id="xiangqing_Price" type="text" value="">
                    </div>
                    <div class="product_details_id">
                        商品id
                        <input id="product_details_id_input" type="text" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="Product_details_Ok">
            添加购物车
            </button>
            <button class="Product_details_close" onclick="jQuery('#Product_detail').hide();jQuery('.jiezhang_mask').hide()">
                关闭
            </button>
        </div>
    </div>
    <!--    结账窗体-->
    <div id="jiezhang" class="modal fade" tabindex="-1"   src="../images/logo.png" style="width:1122px;height: 700px" >
        <!--<img src="https://img1.baidu.com/it/u=589959643,4213752690&fm=253&fmt=auto&app=138&f=JPEG?w=608&h=405">-->



        <div class="modal-dialog modal-lg">
            <div class="modal-content" id="lll">
                <div id="jiezhang_move" class="modal-header">
                    <div class="modal-title modal-title-left"> <div class="sppz" style="font-size: 20px">商品结账</div></div>

                    <div class="modal-title modal-title-right" onclick="jQuery('#jiezhang').hide();jQuery('.jiezhang_mask').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <table id="show-chuku-table"></table>
                </div>
                <div class="modal-content-left">
<!--                    <div class="room_info">-->
<!--                       消费单号：-->
<!--                        <div class="input_order" style="width: 300px;">-->
<!--                            <input style="" class="form_input" id="danhao1" name="danhao" value="888888888888888"/>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="title">
                        <table class="table">
                            <thead>
                            <tr style="border-bottom: 4px solid #d8e1e6;">
                                <td class="itemName1"style="transform: translateX(2px);width: 130px">商品名称</td>
                                <td class="itemNum1"style="transform: translateX(1px);">数量</td>
                                <td class="itemAmount1" style="transform: translateX(2px);">金额</td>
                                <td class="itemzheko"style="transform: translateX(2px);">折扣</td>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="empty_mask1">
                        <div class="cont">
                            <table id="table1" class="table table-hover">
                                <tbody>
                                <!--    //自动添加商品-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-content-center">
                    <div id="but4">
                        <!--<img src="https://img1.baidu.com/it/u=589959643,4213752690&fm=253&fmt=auto&app=138&f=JPEG?w=608&h=405">-->
                        <img src="../../images/zhe.webp">
                        <span >折&nbsp扣</span>
                    </div>
                    <!--<div><img src="../../images/zheko1.png" style="width: 80px;height: 80px;margin-left: 2px;margin-top: 5px"><span>折扣</span></div>-->
                    <div id="but5">
                        <img src="../images/免单.png">
                        <!--<img src="http://zkwsoft.cn/qtye/img/png_miandan.png">-->
                        <span >免&nbsp单</span>
                    </div>
                    <div id="but6">
                        <!--<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">-->
                        <!--<img src="https://img2.baidu.com/it/u=562474378,1823153239&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500">-->
                        <img src="../../images/beizhu.webp">
                        <span >备&nbsp注</span>
                    </div>
                    <!--<div id="but78">-->
                        <!--&lt;!&ndash;<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">&ndash;&gt;-->
                        <!--<img src="https://img.sxsme.com.cn/uploadimg/ico/2022/0830/1661845499557226.jpg">-->
                        <!--<span >开&nbsp票</span>-->
                    <!--</div>-->
                    <!--<div id="but79">-->
                        <!--&lt;!&ndash;<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">&ndash;&gt;-->
                        <!--<img src="https://img2.baidu.com/it/u=2971057363,1347840469&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500">-->
                        <!--<span >抹&nbsp零</span>-->
                    <!--</div>-->
                </div>
                <div class="modal-content-right">
                        <div class="choose_member">
                            <div>
                                <div class="choose_member_head">
                                    <input style="border-style: none;" type="text" maxlength="11" name="" value="" class="search form-control" placeholder="会员姓名/手机号/卡号(扫码/回车)">
                                    <a id="huiyuan_xz" href="javascript:;" class="choose_oneMem" data-prem="0205001">选择会员</a>
                                </div>
                                <div class="memeber_info" style="display: none;">

                                </div>
                            </div>
                        </div>
                        <!-- 辅助搜索会员提示 -->
                        <div class="tishi_list" style="display: none;">

                        </div>
                        <div class="detailed_info">
                            <p style="padding: 5px 0;border-top: 1px solid #eee; margin: 0; display: none;">详细信息</p>
                            <p>
                                <span>消费总额: <span id="xiaofei_Sum"></span></span>
<!--                                <span>打折优惠: <span class="bills_Discountamount">0.00</span></span>-->
<!--                                <span>免单金额: <span class="bills_FreeBillsPrice">0.00</span></span>-->
                                <span>抹零金额: <span class="bills_ReducedPrice">0.00</span></span>
                                <span>挂账金额: <span class="guazhang">0.00</span></span>
                            </p>
<!--                            <p>-->
<!--                                <span>抹零金额: <span class="bills_ReducedPrice">0.00</span></span>-->
<!--                                <span>挂账金额: <span class="guazhang">0.00</span></span>-->
<!--                                <span><span></span></span>-->
<!--                            </p>-->
                        </div>

                        <div class="list">
                            <div class="con1">
                                <span>应收：</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ￥<span id="yingshou_Sum"> </span>
                            </div>
                            <div class="types">
                                <!-- <div>
                                  <span class="order_type_name">
                                    <span data-no="8">现金</span>
                                  </span>
                                  <span>
                                    <input type="text" maxlength="8" class="form-control cash" value="" name=""
                                      oninput="value=value.replace(/^\D*(\d*(?:\.\d{0,2})?).*$/g,'$1')">
                                    <a href="javascript:;" class="cash_close">X</a>
                                  </span>
                                </div> -->
                            </div>
                            <div class="con1">
                                <span>找零</span>
                                <span class="change">￥ 0.00</span>

                            </div>

                        </div>

                        <div class="couponHint">
                            <span>优惠券</span>
                            <span class="usableCouponHint">暂无可用</span>
                        </div>

<!--                        <div class="payTypeBox">-->
<!--                            <div class="pay_type payType">-->
<!--                                <div style="display: inline-block;" data-no="1384" data-name="现金">-->
<!--                                    现金-->
<!--                                </div>-->
<!--                                <div style="display: inline-block;" data-no="1385" data-name="储值卡">-->
<!--                                    储值卡-->
<!--                                </div>-->

<!--                                <div style="display: inline-block;" data-no="1386" data-name="银行卡">-->
<!--                                    银行卡-->
<!--                                </div>-->

<!--                                <div style="display: inline-block;" data-no="1387" data-name="代金券">-->
<!--                                    代金券-->
<!--                                </div>-->

<!--                                <div style="display: inline-block;" data-no="1388" data-name="微信">-->
<!--                                    微信/支付宝-->
<!--                                </div>-->

<!--&lt;!&ndash;                                <div data-no="1389" data-name="支付宝">&ndash;&gt;-->
<!--&lt;!&ndash;                                    支付宝&ndash;&gt;-->
<!--&lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                            </div>-->
<!--                        </div>-->

                        <div class="calculate">
                            <table class="table table-bordered">
                                <tbody><tr>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                    <td id="but7" data-prem="0205008" class="but7 settle_finish">
                                        结账完成
                                    </td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>

                                    <td class="disabled">￥ 100</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>￥ 50</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td>.</td>
                                    <td>C</td>
                                    <td>￥ 20</td>
                                </tr>
                                </tbody></table>
                        </div>

                </div>

            </div>
        </div>
    </div>

    <!--    折扣窗体-->
    <div id="zheko" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="zheko_move" class="modal-header" >
                    <div class="modal-title modal-title-left">打折优惠</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#zheko').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <table id="show-zheko-table"></table>
                </div>
                <div class="zhekou_content">
                    <div class="title">
                        <table class="table">
                            <thead>
                            <tr>
                                <td class="itemName1">选中</td>
                                <td class="itemName2" style="transform: translateX(0px);">商品名称</td>
                                <td class="itemNum2">数量</td>
                                <td class="itemAmount2" style="transform: translateX(0px);">金额</td>
                                <td class="itemzheko2">折扣</td>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="empty_mask2">
                        <div class="cont">
                            <table id="table2" class="table table-hover">
                                <tbody>
                                <!--                        //自动添加商品-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="border-top">
                    <label >
                        <input type="checkbox" id="is_all" class="is_all">是否全选
                    </label>

                    <div
                    >
                        <label>
                            <input type="text" name="is" id="qb_xz" value maxlength="4" class="from-control dazhe_val" placeholder="请输入打折比例(0-1)">
                        </label>
                    </div>
                    <button id="dazhe" type="button" class="btn btn-primary">
                        <i class="bi bi-arrow-bar-up icon"></i>
                        打折
                    </button>
<!--                    <button id="chuku-submit-btn" type="button" class="btn btn-primary" style="width:100px;margin-left:345px;margin-top:-80px">-->
<!--                        <i class="bi bi-arrow-bar-up icon"></i>-->
<!--                        确定-->
<!--                    </button>-->
                    <button onclick="jQuery('#zheko').hide()"  type="button" class="btn btn-primary left-margin">
                        关闭
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--    备注窗体-->
    <div id="beizhu" class="modal fade" tabindex="-1" >
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="beizhu_move" class="modal-header" >
                    <div class="modal-title modal-title-left" >备注</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#beizhu').hide()">
                        <img src="../../images/guanbi.png" style="width: 26px;height: 26px">
                    </div>
                </div>
                <div class="modal-body">
                    <label>
                        <!-- <p>备注</p> -->
                        <textarea style="width: 100%;height:100px;font-size: 18px;padding: 10px 0;outline: none;border: 1px solid #ccc;" name=""  cols="30" rows="3" class="form-control beizhu" resize="none" placeholder="请输入备注，最多30字" onchange="this.value=this.value.substring(0,30)" onkeydown="this.value=this.value.substring(0,30)" onkeyup="this.value=this.value.substring(0,30)"></textarea>
                    </label>
                </div>
                <div class="modal-footer">
                    <button style="float: right" type="button" class="btn btn-primary beizhu_btn" onclick="jQuery('#beizhu').hide()">确定</button>
                    <!-- <button type="button" class="btn btn-default" data-dismiss="modal">取消</button> -->
                </div>
            </div>
        </div>
    </div>
    <!--    会员窗体-->
    <div id="huiyuan" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="huiyuan_move" class="modal-header">
                    <div class="modal-title modal-title-left">选择会员</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#huiyuan').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <div class="search">
                        <input id="huiyuan_window" type="text" class="form-control search_str" maxlength="11" placeholder="手机号/卡号/姓名" onkeypress="getEnterKey();">
                    </div>
                    <div class="member-list">
                        <table id="huiyuan_table" class="table table-hover">
                            <thead>
                                <tr>
                                    <td>卡号</td>
                                    <td>姓名</td>
                                    <td>性别</td>
                                    <td>电话</td>
                                    <td>状态</td>
                                    <td>积分</td>
                                </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>
<!--                    <table id="show-huiyuan-table"></table>-->
                </div>
                <div class="modal-footer">
                    <nav aria-label="Page navigation"style="float: left">
                        <ul class="pagination" style="margin: 0">
                            <li id="last" class="disabled">
                                <a href="javascript:;" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active">
                                <a href="javascript:;">
                                    1
                                </a>
                            </li>
                            <li id="next" class="disabled">
                                <a href="javascript:;" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <button type="button" class="huiyuan_footer_close" data-dismiss="modal" onclick="jQuery('#huiyuan').hide()">关闭</button>
                </div>

<!--                <div>-->
<!--                    <div class="title">-->
<!--                        <table class="table">-->
<!--                            <thead>-->
<!--                            <tr>-->
<!--                                <td class="itemName1">姓名</td>-->
<!--                                <td class="itemName2">电话</td>-->
<!--                            </tr>-->
<!--                            </thead>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                    <div id="empty_mask3">-->
<!--                        <div class="cont">-->
<!--                            <table id="table3" class="table table-hover">-->
<!--                                <tbody>-->
<!--                                &lt;!&ndash;                        //自动添加商品&ndash;&gt;-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </div>
    </div>


<script>
    let datas = []
    let p_zhekou = 1
    let p_name = ""
    let p_username = ""

    window.onload = function() {
        tableShow();
    }

    $(document).ready(function(){
        Table_sum();
        orders_auto();
    })

    //右边菜单栏点击事件,显示出对应类型的商品
    $(".Rblock .Bmenu li").click(function () {
        //获取li下面的a链接
        var _this = $(this).children();
        //获取a链接里面的文字
        var type = _this.eq(0).text();
        console.log(type)
        var this_str = ""

        if(type == "全部"){
            for(var i=0; i<datas.length; i++){
                var num = datas[i].price.split(",")[0] * p_zhekou//商品价格*折扣
                console.log('折扣='+p_zhekou)//当前商品折扣为1
                num = Math.floor(num * 100) / 100;//该类型下的商品价格
                console.log('num='+num)
                //所要显示的商品价格
                this_str += "" +
                    "<li>" +
                    "<div class=\"img\">" +
                    "<img src=\"" + datas[i].photo + "\" alt=\"\">" +
                    "</div>" +
                    "<div class=\"product_details\">"+
                    "<div class=\"title\">\n" +
                    "" + datas[i].product_name  +
                    "</div>" +
                    "<div class=\"money\">￥<span>" + num + "</span>元</div>" +
                    "</div>"+
                    "<div class=\"none id\">" + datas[i].id + "</div>" +
                    "</li>"
            }
        }else{
            for(var i=0; i<datas.length; i++){
                if(datas[i].type == type){
                    var num = datas[i].price.split(",")[0] * p_zhekou//商品价格*折扣
                    console.log('折扣='+p_zhekou)//当前商品折扣为1
                    num = Math.floor(num * 100) / 100;//该类型下的商品价格
                    console.log('num='+num)
                    //所要显示的商品价格
                    this_str += "" +
                        "<li>" +
                        "<div class=\"img\">" +
                        "<img src=\"" + datas[i].photo + "\" alt=\"\">" +
                        "</div>" +
                        "<div class=\"product_details\">"+
                        "<div class=\"title\">\n" +
                        "" + datas[i].product_name  +
                        "</div>" +
                        "<div class=\"money\">￥<span>" + num + "</span>元</div>" +
                        "</div>"+
                        "<div class=\"none id\">" + datas[i].id + "</div>" +
                        "</li>"
                }
            }
        }



        $(".Rblock .block li").attr("style","display:none;");
        $(".Rblock .block").append(this_str);

    })
    //给选中商品添加点击样式并进行增加减少和删除的操作
    $('.Lblock #empty_mask .cont .table tbody tr').click(function (){
        //产品id
        var product_id = $(this).children().eq(0).text();
        //产品个数
        var product_count = $(this).children().eq(2).children().eq(1).text();
        //产品单价 个数乘单价(datas[i].price)
        // var product_money = $(this).children().eq(3).children().eq(0).text();
        var product_money = datas[product_id].price*product_count;
        //声明一个数组用来接收
        //  var product_arr[] = null;

        // $(this).children.addClass("menuType-active").siblings().removeClass("menuType-active");
        // console.log(product_id.text(),product_count.text(),product_money.text(),product_td_Smoney.text())
        for(var i =0; i<=$(this).length;i++){
            if (parseInt(($(this).index()+1)) == parseInt(product_id)){
                $(".index .btns.jia").click(function (){
                    parseInt(parseInt(product_count)+parseInt("1"));
                    product_money += product_money;
                })
                $(".index .btns.jian").click(function (){
                    parseInt(parseInt(product_count.text())-parseInt("1"));
                    product_money += product_money;
                })
                $(".index .btns.del_this_td").click(function (){
                    $(this).index(parseInt(parseInt(product_id)-parseInt("1"))).remove();
                })
            }
        }
    })

    $("body").on('click','.Product_details_Ok',function(){
        //单点一份的1
        var num = $('.product_details_count input').val();
        //新增商品的序号
        var product_now_id = parseInt($(".index .Lblock #empty_mask .cont .table tbody tr").length+parseInt("1"));
        //获取添加商品链接的id
        var product_id = $("#product_details_id_input").val();
        console.log(product_id);
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                //所要显示的商品价格
                this_str += "" +
                    "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                    "<td class=\"itemOrderNo\">" + product_now_id+ "</td>" +
                    "<td class=\"itemName\">" + datas[i].product_name + "</td>"+
                    "<td class=\"itemNum\">" +
                    "<span class=\"count\">" + num + "</span>"+
                    "/"+
                    "<span class=\"unit\">" + datas[i].unit + "</span>"+
                    "</td>"+
                    "<td class=\"itemAmount\">" +
                    "￥"+
                    "<span class=\"price\">" + $('.product_details_price input').val() + "</span>"+
                    "</td>"+
                    "<td class=\"itemid\" style='visibility: hidden;width: 0px;margin: 0;padding: 0'>" +
                    "<span class=\"id\">" + datas[i].id + "</span>"+
                    "</td>"+
                    "</tr>"
            }
        }
        $(".Lblock #empty_mask .table tbody").append(this_str);
        Table_sum();
        jQuery('#Product_detail').hide()
        jQuery('.jiezhang_mask').hide()
    });



    $("body").on('click','#huiyuan_table tbody tr',function(){
        //单点一份的1
        var name = $(this).children().eq(1).text();
        var username = $(this).children().eq(0).text();
        p_name = name
        p_username = username
        console.log(name)
        jQuery('#huiyuan').hide();
        var this_str = "<p>" +
            "           <span>会员:</span>" +
            "           <span class=\"member_name\" title=\"" + name + "\">" + name + "</span>" +
            "           <span class=\"member_username_title\">会员账号:</span>" +
            "           <span class=\"member_username\" title=\"" + username + "\">" + username + "</span>" +
            "           </p>"
        $(".memeber_info p").remove()
        $(".memeber_info").append(this_str)
        $(".member_username_title").css('margin-left','70px')
        $(".memeber_info").css('display','flex')
    });


    function ondblclick_f(obj){
        $(obj).remove();
        Table_sum();
    }

    $("body").on('click','.success',function(){
        //单点一份的1
        console.log('dd')
        $('.success').css('background-color', 'rgb(188 209 253)');
        $(this).css('background-color', '#ebe9e9');
    });

    $("body").on('click','#jia',function(){
        //单点一份的1
        console.log('jia')

        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_count = this_count * 1 + 1 * 1
                this_money = this_money * 1 + danjia * 1
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
            }
        });
        Table_sum();
    });

    $("body").on('click','#jian',function(){
        //单点一份的1
        console.log('jian')
        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_count = this_count * 1 - 1 * 1
                this_money = this_money * 1 - danjia * 1
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
                if(this_count < 1){
                    $(this).remove();
                }
            }
        });
        Table_sum();
    });

    $("body").on('click','#is_zengsong',function(){
        console.log()
        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_money = 0
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
                // if(this_count < 1){
                //     $(this).remove();
                // }
            }
        });
        Table_sum();
    });

    //--------------------------------


    // 作废按钮点击后
    $(".but2").click(function () {
        console.log("delete")
        $(".Lblock #empty_mask .cont .table tbody tr").remove();
        Table_sum();
        location.replace(location.href);
    })
    //鼠标经过结账按钮
    var ceshiText=""
    $(".but7").mouseenter(function (e) {
        ceshiText="本次消费"+ $("#yingshou_Sum").text()+"元"
        console.log(ceshiText)
        handleSpeak(ceshiText)
    });

    const synth = window.speechSynthesis;
    const msg = new SpeechSynthesisUtterance();
        //语音播报的函数
    function handleSpeak(text){
        msg.text = text;
        msg.lang = "zh-CN";
        msg.volume = 1;
        msg.rate = 2;
        msg.pitch = 0;
        synth.speak(msg);
    }
        //语音停止
    function handleStop(e){
        msg.text =e;
        msg.lang = "zh-CN";
        synth.cancel(msg);
    }
    //结账按钮点击后
    $(".but7").click(function () {
        console.log("add")
        var pro_list = []
        var pro_num = $("#danhao").val();
        var member_name=p_name
        var member_username=p_username

        $("#table1 tbody tr").each(function () {
            var id = $(this).children().eq(0).text();
            var jine = $(this).children(".itemAmount1").children().eq(0).text();
            jine = jine.replace("￥","")
            var shul= $(this).children(".itemNum1").children().eq(0).text();
            var zhek= $(this).children(".itemzheko").children().eq(0).text();

            console.log(jine)
            console.log(shul)
            console.log(zhek)
            for(var i=0; i<datas.length;i++){
                if(datas[i].product_name == id){
                    pro_list.push({
                        member_name:member_name,
                        member_username:member_username,
                        cplx:datas[i].type,
                        cpmc:datas[i].product_name,
                        dw:datas[i].unit,
                        dj:datas[i].price,
                        dzbl:zhek,
                        // zhdj:zhehou / num,
                        zhdj:jine*zhek/shul,
                        // zhje:zhehou,
                        zhje:jine*zhek*shul/shul,
                        gs:shul
                    })
                }

            }
        })

        jQuery("#jiezhang").hide()
        jQuery(".jiezhang_mask").hide()
        $(".Lblock #empty_mask .cont table tr").remove()
        console.log(pro_list)
        console.log(pro_num)

        $.ajax({
            type: 'post',
            url: '/order_panel/add',
            timeout: 5000,
            data: {
                pro_list: JSON.stringify(pro_list),
                pro_num: pro_num,
                member_name:member_name,
                member_username,
                youhui: p_zhekou
            },
            success: function(res){
                let result = JSON.parse(res)
                alert(result.msg)
                tableShow();
                orders_auto();
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
        location.replace(location.href);
    })

    document.getElementById("but3").onclick = function() {
        var num = $('.Lblock #empty_mask .cont .table tbody tr').length;
        if (num <1){
            alert('购物车为空')
        }else{
            $("#table1 tbody tr").remove();
            var pro_list = []
            var pro_num = $("#danhao").val();
            var this_str1 = ""
            var _number = 0;
            var _money = 0;
            $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
                var id = $(this).children(".itemid").eq(0).text();
                var num = $(this).children(".itemNum").children().eq(0).text();
                var zhehou = $(this).children(".itemAmount").children().eq(1).text();
                var money = $(this).children().eq(3).text();
                console.log(id)
                console.log(num)
                console.log(zhehou)
                console.log(datas)
                for(var i=0; i<datas.length;i++){
                    if(datas[i].id == id){
                        console.log(datas[i].id)
                        this_str1 += "" +
                            "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                            "<td class=\"itemName1\">" + datas[i].product_name + "</td>"+
                            "<td class=\"itemNum1\">" +
                            "<span class=\"count\">" + num + "</span>"+
                            "/"+
                            "<span class=\"unit\">" + datas[i].unit + "</span>"+
                            "</td>"+
                            "<td class=\"itemAmount1\">" +
                            "<span class=\"price\">" + money + "</span>"+
                            "</td>"+
                            "<td class=\"itemzheko\"><div class=\"aa\">1</div></td>"+
                            "</tr>"
                        console.log(this_str1)
                    }
                }
            })
            $("#table1 tbody").append(this_str1);
            console.log(pro_list)
            console.log(pro_num)
            if(pro_num == ''){
                alert("未填写订单号")
                return;
            }
            console.log(pro_list.length)
            if(datas.length == 0){
                alert("未选择商品")
                return;
            }
            $(".hover").click(function (){
                $(".hover").removeClass("active")
                $(".hover").addClass("active")
            })
            jQuery(".jiezhang_mask").show()
            jQuery('#jiezhang').show();
            $("body").addClass("mask")
            huiyuan_sum();
        }

    };

    document.getElementById("but4").onclick = function() {
        console.log("add")
        $("#table2 tbody tr").remove();
        var pro_list = []
        var pro_num = $("#danhao").val();
        var this_str1 = ""
        $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
            var id = $(this).children(".itemid").eq(0).text();
            var num = $(this).children(".itemNum").children().eq(0).text();
            var zhehou = $(this).children(".itemAmount").children().eq(1).text();
            var money = $(this).children().eq(3).text();
            console.log(id)
            console.log(num)
            console.log(zhehou)
            console.log(datas)
            console.log(id)
            for(var i=0; i<datas.length;i++){
                if(datas[i].id == id){
                    console.log(datas[i].id)
                    this_str1 += "" +
                        "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                        "<td class=\"itemxuanzhe\"><input class=\"itemxuanzhe1\" type=\"checkbox\"></td>"+
                        "<td class=\"itemName2\">" + datas[i].product_name + "</td>"+
                        "<td class=\"itemNum2\">" +
                        "<span class=\"count\">" + num + "</span>"+
                        "/"+
                        "<span class=\"unit\">" + datas[i].unit + "</span>"+
                        "</td>"+
                        "<td class=\"itemAmount2\">" +
                        "<span class=\"price\">" + money + "</span>"+
                        "</td>"+
                        "<td class=\"itemzheko\">1</td>"+
                        "<td class=\"itemid\" style='visibility: hidden;width: 10px;margin: 0;padding: 0'>" +
                        "<span class=\"id\">" + datas[i].id + "</span>"+
                        "</td>"+
                        "</tr>"

                    console.log(this_str1)
                }
            }
        })
        $("#table2 tbody").append(this_str1);
        console.log(pro_list)
        console.log(pro_num)
        if(pro_num == ''){
            alert("未填写订单号")
            return;
        }
        console.log(pro_list.length)
        if(datas.length == 0){
            alert("未选择商品")
            return;
        }
        $(".hover").click(function (){
            $(".hover").removeClass("active")
            $(".hover").addClass("active")
        })
        jQuery('#zheko').show();
        huiyuan_sum();
    };

    document.getElementById("but5").onclick = function() {
        var _money = 0;
        $("#table2 tbody tr").each(function () {
            var num = $(this).children(".itemNum2").children().eq(0).text();
            var this_money = $(this).children(".itemAmount2").children().eq(0).text();
            var zheko = $(this).children(".itemzheko").eq(0).text();
            _money =0;
        })
        console.log(_money)
        $("#yingshou_Sum").html(_money.toFixed(2));

    };

    document.getElementById("but6").onclick = function() {
        jQuery('#beizhu').show();
        huiyuan_sum();
    };

    document.getElementById("dazhe").onclick = function() {
        var xiabiao_arr = []
        var bianliang = 1
        var zheko_zhi = $("#qb_xz").val();
        $("#table2 tbody tr").each(function () {
            var this_check = $(this).children(".itemxuanzhe").children().is(':checked');
            console.log(this_check)
            if (this_check == true) {
                console.log('判断成功')
                console.log($(this).children(".itemzheko").eq(0).text())
                $(this).children(".itemzheko").eq(0).text(zheko_zhi);
                xiabiao_arr.push(bianliang)
                // $("#table1 tbody tr").children(".itemzheko").children().eq(0).text(zheko_zhi);
            }
            bianliang = bianliang + 1
        })
        bianliang = 1
        $("#table1 tbody tr").each(function () {
            if (xiabiao_arr.indexOf(bianliang) != -1) {
                console.log('判断成功')
                $(this).children(".itemzheko").children().eq(0).text(zheko_zhi);
            }
            bianliang = bianliang + 1
        })

        jQuery('#zheko').hide()
        huiyuan_sum();
    };

    $("#is_all").change(function() {
        var this_check = $("#is_all").is(':checked')
        console.log(this_check)
        $(".itemxuanzhe1").attr("checked",this_check)
        // if (this_check = true){
        //     $(".itemxuanzhe1").attr("checked",this_check)
        // }else if (this_check = false){
        //     $(".itemxuanzhe1").attr("checked",this_check)
        // }
    });

    document.getElementById("huiyuan_xz").onclick = function() {
        jQuery('#huiyuan').show();
        $.ajax({
            type: 'post',
            url: '/order_panel/select_huiyuan_list',
            async:false,
            data:{
                this_head:"",
            },
            timeout: 5000,
            success: function(res){
                let result = JSON.parse(res)
                console.log('会员列表')
                console.log(result.datas)
                var this_str = ""
                for(var i=0; i<result.datas.length; i++){
                    this_str = this_str + "<tr>" +
                        "<td>" + result.datas[i].username + "</td>" +
                        "<td>" + result.datas[i].name + "</td>" +
                        "<td>" + result.datas[i].gender + "</td>" +
                        "<td>" + result.datas[i].phone + "</td>" +
                        "<td>" + result.datas[i].state + "</td>" +
                        "<td>" + result.datas[i].points + "</td>" +
                        "</tr>"
                }
                $("#huiyuan_table tbody tr").remove();
                $("#huiyuan_table tbody").append(this_str);

            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
    };

    function getEnterKey(){
        if(event.keyCode==13){
            var keyword = $('#huiyuan_window').val()
            $.ajax({
                type: 'post',
                url: '/order_panel/select_huiyuan_list',
                async:false,
                data:{
                    this_head:keyword,
                },
                timeout: 5000,
                success: function(res){
                    let result = JSON.parse(res)
                    console.log('会员列表')
                    console.log(result.datas)
                    var this_str = ""
                    for(var i = 0; i < result.datas.length; i++){
                        this_str = this_str + "<tr>" +
                            "<td>" + result.datas[i].username + "</td>" +
                            "<td>" + result.datas[i].name + "</td>" +
                            "<td>" + result.datas[i].gender + "</td>" +
                            "<td>" + result.datas[i].phone + "</td>" +
                            "<td>" + result.datas[i].state + "</td>" +
                            "</tr>"
                    }
                    $("#huiyuan_table tbody tr").remove();
                    $("#huiyuan_table tbody").append(this_str);

                },
                error: function(res){
                    if(res.status == "timeout"){
                        alert("网络超时，请稍后再试")
                    }else{
                        alert("网络错误，请稍后再试")
                    }
                }
            });
        }
    }

    //改过了--------------
    //合计商品数量和价格
    //完成了
    function Table_sum(){

        var _number = 0;
        var _money = 0;
        $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
            var number = $(this).children().eq(2).children().eq(0).text();
            var money = $(this).children().eq(3).text();
            money = money.replace("￥","")
            console.log(number)
            console.log(money)
            console.log(this)
            console.log($(this).children().eq(3).children(".itemAmount").text())
            _number += (number * 1);
            _money += (money * 1);

        })
        console.log(_number)
        console.log(_money)
        // console.log('当前money='+_money);
        $(".Lblock .end").children().eq(0).children(".count").text(_number);
        $(".Lblock .end").children().eq(1).children().children(".price_total").text(_money);

    }

    function huiyuan_sum(){

        var _money = 0;
        $("#table1 tbody tr").each(function () {
            var num = $(this).children(".itemNum1").children().eq(0).text();
            var this_money = $(this).children(".itemAmount1").children().eq(0).text();
            this_money = this_money.replace("￥","")
            var zheko = $(this).children(".itemzheko").children().eq(0).text();

            _money = _money + (this_money * zheko);
        })
        console.log(_money)
        $("#xiaofei_Sum").html(_money.toFixed(2))
        $("#yingshou_Sum").html(_money.toFixed(2))


    }

    function tableShow(){
        $.ajax({
            type: 'post',
            url: '/order_panel/select',
            async:false,
            timeout: 5000,
            success: function(res){
                //转成json
                let result = JSON.parse(res)
                console.log(result)
                datas = result.datas
                console.log(datas)
                let users = result.users
                console.log(users)
                if(users.usertype == '客户'){
                    $.ajax({
                        type: 'post',
                        url: '/order_panel/select_discount',
                        async:false,
                        timeout: 5000,
                        success: function(res){
                            let result = JSON.parse(res)
                            console.log('客户金额和等级列表')
                            console.log(result)
                            var zhekou = 1
                            var zhekou_list = result.dengji
                            var xiaofei = result.xiaoji_sum
                            if(xiaofei == null){
                                xiaofei = 0
                            }
                            for(var i=0; i<zhekou_list.length; i++){
                                console.log("门槛：" + zhekou_list[i].menkan * 1)
                                console.log("消费金额：" + xiaofei * 1)
                                if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
                                    zhekou = zhekou_list[i].bili
                                }
                            }
                            console.log(zhekou)
                            p_zhekou = zhekou
                            var this_str = ""
                            console.log(datas)
                            for(var i=0; i<datas.length; i++){
                                var num = product_Startprice * zhekou
                                num = Math.floor(num * 100) / 100;
                                this_str = this_str + "<li><div class=\"img\"><img src=\"{{datas[i].photo}}\" alt=\"\"></div><div class=\"title\">\n" +
                                    "                    " + datas[i].product_name  +
                                    "                </div>" +
                                    "                <div class=\"money\">￥<span>" + num + "</span>元</div>" +
                                    "                <div class=\"none id\">" + datas[i].id + "</div>" +
                                    "            </li>"

                            }

                            $(".Rblock .block li").remove();
                            $(".Rblock .block").append(this_str);

                            $(".Lblock .table .cont li").remove();
                            $(".table .cont").attr("style", "display:none");
                            $("#empty_mask").attr("style", "display:block");
                            Table_sum();

                        },
                        error: function(res){
                            if(res.status == "timeout"){
                                alert("网络超时，请稍后再试")
                            }else{
                                alert("网络错误，请稍后再试")
                            }
                        }
                    });
                }
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });

    }

    function member_select_tableShow(){
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
        $.ajax({
            type: 'post',
            url: '/order_panel/select_huiyuan_list',
            async:false,
            timeout: 5000,
            success: function(res){
                //转成json
                let result = JSON.parse(res)
                console.log(result)
                datas = result.datas
                console.log(datas)
                let users = result.users
                console.log(users)
                if(users.usertype == '客户'){
                    $.ajax({
                        type: 'post',
                        url: '/order_panel/select_discount',
                        async:false,
                        timeout: 5000,
                        success: function(res){
                            let result = JSON.parse(res)
                            console.log('客户金额和等级列表')
                            console.log(result)
                            var zhekou = 1
                            var zhekou_list = result.dengji
                            var xiaofei = result.xiaoji_sum
                            if(xiaofei == null){
                                xiaofei = 0
                            }
                            for(var i=0; i<zhekou_list.length; i++){
                                console.log("门槛：" + zhekou_list[i].menkan * 1)
                                console.log("消费金额：" + xiaofei * 1)
                                if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
                                    zhekou = zhekou_list[i].bili
                                }
                            }
                            console.log(zhekou)
                            p_zhekou = zhekou
                            var this_str = ""
                            console.log(datas)
                            for(var i=0; i<datas.length; i++){
                                var num = datas[i].price * zhekou
                                num = Math.floor(num * 100) / 100;
                                this_str = this_str + "<tr><td>" + " + datas[i].product_name"+
                                    "                </div>" +
                                    "                <div class=\"money\">￥<span>" + num + "</span>元</div>" +
                                    "                <div class=\"none id\">" + datas[i].id + "</div>" +
                                    "            </tr>"

                            }

                            $(".Rblock .block li").remove();
                            $(".Rblock .block").append(this_str);

                            $(".Lblock .table .cont li").remove();
                            $(".table .cont").attr("style", "display:none");
                            $("#empty_mask").attr("style", "display:block");
                            Table_sum();

                        },
                        error: function(res){
                            if(res.status == "timeout"){
                                alert("网络超时，请稍后再试")
                            }else{
                                alert("网络错误，请稍后再试")
                            }
                        }
                    });
                }
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
    }

    // 菜单栏点击效果
    $(function(){
        $(".Rblock .Bmenu .hover .menuType").click(function(){
            $(this).addClass("menu-a").parent().siblings().children().removeClass("menu-a");
        });
    });

    // 结账窗口移动
    var jiezhang = document.querySelector('#jiezhang');
    var jiezhang_move = document.querySelector('#jiezhang_move');
    jiezhang_move.addEventListener('mousedown',function(e){
        var x = e.pageX - jiezhang.offsetLeft;
        var y = e.pageY - jiezhang.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            jiezhang.style.left = e.pageX - x + "px";
            jiezhang.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 折扣窗口移动
    var zheko = document.querySelector('#zheko');
    var zheko_move = document.querySelector('#zheko_move');
    zheko_move.addEventListener('mousedown',function(e){
        var x = e.pageX - zheko.offsetLeft;
        var y = e.pageY - zheko.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            zheko.style.left = e.pageX - x + "px";
            zheko.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 备注窗口移动
    var beizhu = document.querySelector('#beizhu');
    var beizhu_move = document.querySelector('#beizhu_move');
    beizhu_move.addEventListener('mousedown',function(e){
        var x = e.pageX - beizhu.offsetLeft;
        var y = e.pageY - beizhu.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            beizhu.style.left = e.pageX - x + "px";
            beizhu.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 会员窗口移动
    var huiyuan = document.querySelector('#huiyuan');
    var huiyuan_move = document.querySelector('#huiyuan_move');
    huiyuan_move.addEventListener('mousedown',function(e){
        var x = e.pageX - huiyuan.offsetLeft;
        var y = e.pageY - huiyuan.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            huiyuan.style.left = e.pageX - x + "px";
            huiyuan.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 商品详情移动
    var Product_detail = document.querySelector('#Product_detail');
    var Product_detail = document.querySelector('#Product_detail');
    Product_detail_move.addEventListener('mousedown',function(e){
        var x = e.pageX - Product_detail.offsetLeft;
        var y = e.pageY - Product_detail.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            Product_detail.style.left = e.pageX - x + "px";
            Product_detail.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 自动获取订单号
    function orders_auto(){
            var myDate = new Date();
            var year = myDate.getFullYear();
            var month = myDate.getMonth()+1;
            var day = myDate.getDate();
            var fixedvalue = 1;
            if (month < 10){
                month = '0' + month;
            }
            if(day <10){
                day = '0' + day;
            }
            if(fixedvalue>=1000 && fixedvalue<=9999){
                fixedvalue = fixedvalue;
            }else if(fixedvalue>=100 && fixedvalue<=999){
                fixedvalue = '0'+ fixedvalue;
            }else if(fixedvalue>=10 && fixedvalue<=99){
                fixedvalue = '0'+'0'+fixedvalue
            }else if(fixedvalue>=1 && fixedvalue<=9){
                fixedvalue = '0'+'0'+'0'+fixedvalue
            }
            orders_value = year.toString()+month.toString()+day.toString()+fixedvalue.toString()
            $.ajax({
                type: 'post',
                url: '/order_panel/select_order_number',
                data: {
                    this_head: orders_value,
                },
                async:false,
                timeout: 5000,
                success: function(res){
                    let result = JSON.parse(res)
                    if (result.datas.length>0){
                        for (var i = 0 ;i<result.datas.length;i++){
                            if( orders_value+""<=  result.datas[i].ddh){
                                fixedvalue += 1
                                orders_value = result.datas[i].ddh * 1 + 1;
                                console.log(orders_value)
                            }
                        }

                    }
                },
                error: function(res){
                    if(res.status == "timeout"){
                        alert("网络超时，请稍后再试")
                    }else{
                        alert("网络错误，请稍后再试")
                    }
                }
            });

            $('#danhao').val(orders_value);
    }

    // 点击商品弹出详情页
    $("body").on('click','.Rblock .block li',function(){
    // $('.Rblock .block li').click(function () {

        jQuery("#Product_detail").show();
        jQuery(".jiezhang_mask").show();

        //单点一份的1
        var num = 1;
        //新增商品的序号
        var product_now_id = parseInt($(".index .Lblock #empty_mask .cont .table tbody tr").length+parseInt("1"));
        //获取添加商品链接的id
        var product_id = $(this).children(".id").text();
        console.log(product_id);
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                this_str = this_str + "<img src=\"" + datas[i].photo + "\" alt=\"\">"
                $(".modal-content-l img").remove();
                $(".modal-content-l").append(this_str);
                $(".modal-content-r-header").text(datas[i].product_name)
                $(".product_details_type input").val(datas[i].type)
                $(".product_details_count input").val(num)

                var this_guige = datas[i].specifications.split(",")
                var this_str = ""
                for(var j=0; j<this_guige.length; j++){
                    this_str = this_str + "<option value='"+ j +"'>" + this_guige[j] + "</option>"
                }
                $(".product_details_specification select option").remove()
                $(".product_details_specification select").append(this_str)
                // $(".product_details_specification select").val(datas[i].specifications)
                var this_flavor = datas[i].practice.split(",")
                var this_str = ""
                for(var f=0; f<this_flavor.length; f++){
                    this_str = this_str + "<option value='"+ f +"'>" + this_flavor[f] + "</option>"
                }
                $(".product_details_flavor select option").remove()
                $(".product_details_flavor select").append(this_str)
                // $(".product_details_flavor select").val(datas[i].practice)
                var this_arr = datas[i].price.split(",")
                $(".product_details_price input").val(this_arr[0])
                $(".product_details_id input").val(datas[i].id)
            }
        }
        document.getElementById("xiangqing_Price").setAttribute('readonly',true);
        document.getElementById("xiangqing_type").setAttribute('readonly',true);
    })


    $("body").on('change','.product_details_specification',function(){
        // $('.Rblock .block li').click(function () {

        //获取添加商品链接的id
        var product_id = $("#product_details_id_input").val();
        var xiabiao = $("#product_details_specification option:selected").val();
        var count = $('.product_details_count input').val()
        var result = 0
        console.log(product_id);
        console.log(xiabiao)
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
    })

    $("body").on('change','.product_details_count',function(){

        var product_id = $("#product_details_id_input").val();
        var xiabiao = $("#product_details_specification option:selected").val();
        var count = $('.product_details_count input').val()
        var result = 0
        console.log(product_id);
        console.log(xiabiao)
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
        result = count*this_arr[xiabiao]
        $(".product_details_price input").val(result)
    })

    // 给全部按钮添加样式
    $("body").on('click','#Bmenu_showAll',function (){
        tableShow()
    })
</script>
</body>
</html>
<SCRIPT Language=VBScript></SCRIPT>