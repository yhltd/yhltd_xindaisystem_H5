<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>会员管理</title>
    <!--    <link rel="stylesheet" type="text/css" href="../../stylesheets/select.css"/>-->
<!--    <link rel="stylesheet" type="text/css" href="../../stylesheets/table.css"/>-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../public/stylesheets/table.css"/>
    <script type="text/javascript" src="../../iframe_d/iframe_d.js"></script>
    <script type="text/javascript" src="../../js/jquery-1.8.3.min.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        html,
        body {
            height: 100%;
            zoom: 1.08;
        }

        #app {
            height: 100%;
        }

        li {
            list-style: none;
        }

        .leftnav {
            width: 5%;
            background-color: #1DBce0;
            height: 100%;
            float: left;
        }

        .leftnav li {
            width: 100%;
            height: 65px;
            text-align: center;
            line-height: 65px;
            border-bottom: 1px solid white;
            color: white;
        }

        .order {
            width: 30%;
            float: left;
            position: relative;
        }

        .order .order-nav {
            border-bottom: 1px solid black;
            overflow: hidden;
            /*  浮动的隐藏 */
        }

        .order-nav li {
            width: 60px;
            height: 42px;
            float: left;
            text-align: center;
            line-height: 42px;
        }

        .order-nav .active {
            color: #1DBce0;
        }

        .order .border {
            width: 60px;
            height: 3px;
            background-color: #1DBce0;
            position: absolute;
            top: 39px;
            transition: left 0.5s;
            /*过渡动画*/
        }

        .oftergoods,
        .typegoods {
            width: 65%;
            float: right;
        }

        .oftergoods {
            overflow: hidden;
        }

        .oftergoods h3 {
            height: 42px;
            border-bottom: 1px solid black;
            line-height: 42px;
        }

        .oftergoods ul {
            padding-top: 30px;
            padding-left: 50px;
        }

        .oftergoods ul li {
            width: 120px;
            height: 38px;
            float: left;
            background-color: antiquewhite;
            border: 1px solid blue;
            margin-right: 30px;
            margin-bottom: 30px;
            line-height: 38px;
            text-align: center;
            padding: 4px;
        }

        .typegoods {
            position: relative;
        }

        .typegoods .typegoods-nav {
            border-bottom: 1px solid black;
            overflow: hidden;
            /*  浮动的隐藏 */
            margin-bottom: 30px;
        }

        .typegoods-nav li {
            width: 60px;
            height: 42px;
            float: left;
            text-align: center;
            line-height: 42px;
        }

        .typegoods-nav .active {
            color: #1DBce0;
        }

        .typegoods .border {
            width: 60px;
            height: 3px;
            background-color: #1DBce0;
            position: absolute;
            top: 39px;
            transition: left 0.5s;
            /*过渡动画*/
        }

        .typegoods .goods {
            width: 200px;
            height: 68px;
            border: 1px solid blue;
            float: left;
            margin-right: 30px;
            background-color: palegoldenrod;
        }

        .typegoods .goods img {
            width: 80px;
            height: 60px;
            float: left;
        }

        .typegoods .goods p {
            line-height: 60px;
        }

        /*点单界面的样式优化2023/1/12-z*/
        .index .Rblock .Bmenu .hover .menu-a{
            background-color: #fff;
            color: #0AA0F6;
        }

        .hover a:hover{
            background-color: white;
            color: #0AA0F6!important;
        }
        .modal{position:fixed;top:0;left:0;z-index:1050;display:none;width:100%;height:100%;overflow:hidden;outline:0}
        #jiezhang{
            width: 97%;
            height: 850px;
            background-color: white;
            left: 50%;
            align-items: center;    /* 垂直居中 */
            top: 3%;
            /*background-image: url('..img//icons/logo.png');*/
            /*background-image: url('https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500');*/
            /*background-image: url('../../images/diandan.webp');*/
            background-image: url('https://gips0.baidu.com/it/u=1542980621,3565762236&fm=3086&app=3086&f=JPEG&wm=1,baiduai3,0,0,13,9&wmo=5,5&w=1280&h=720');
            background-size: cover;
            /*background-image: url('../images/截图20250116132521.png');*/
            transform: translateX(-50%);
            border: 1px solid white;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        .modal-header{
            height: 36px;
            width: 100%;
            margin: 5px auto;
            font-size: 22px;
            background-color: #fd9d1a;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #zheko .modal-header{
            width: 97%;
        }
        .modal-title-left{
            height: 100%;
            line-height: 36px;
            margin-left: 15px;
            font-size: 18px;
        }
        .modal-title-right{
            height: 100%;
            line-height: 36px;
            margin-right: 15px;
            margin-top: 10px;
        }
        .modal-title>img{
            width: 26px;
            height: 26px
        }
        .modal-content-left{
            float: left;
            width: 450px;
            height: 650px;
            /*background-color: white;*/
            /*background-color: #1693ff;*/
            background: linear-gradient(135deg,
            rgba(255, 248, 240, 0.98) 0%,
            rgba(255, 235, 204, 0.95) 50%,
            rgba(255, 247, 230, 0.97) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 170, 0, 0.3);
            box-shadow:
                    0 15px 35px rgba(255, 119, 0, 0.15),
                    0 5px 15px rgba(255, 153, 0, 0.1),
                    inset 0 0 0 1px rgba(255, 255, 255, 0.8),
                    inset 0 0 20px rgba(255, 200, 100, 0.2);
            position: relative;
            overflow: hidden;

            margin: 0px 4px 36px 0px;
            border-radius: 6px;
        }

        /*.itemName1{*/
        /*    transform: translateX(-4px);*/
        /*}*/
        /*.itemNum1{*/
        /*    transform: translateX(-18px);*/
        /*}*/
        /*.itemAmount1{*/
        /*    transform: translateX(-36px);*/
        /*}*/
        /*.itemzheko{*/
        /*    transform: translateX(-17px);*/
        /*}*/
        /*.title>.table thead >.itemName1 {*/
        /*    transform: translateX(-5px);*/
        /*}*/
        /*.title>.table thead >.itemNum1{*/
        /*    transform: translateX(18px);*/
        /*}*/
        /*.title>.table thead >.itemAmount1 {*/
        /*    transform: translateX(36px);*/
        /*}*/
        /*.title>.table thead >.itemzheko{*/
        /*    transform: translateX(17px);*/
        /*}*/
        .modal-content-center{
            float:left;
            width: 90px;
            height: 650px;
            /*background-color: #ffc800;*/
            /*background-color: rgb(0 135 187 / 20%);*/
            /*margin: 13px 4px 10px 12px;*/
            background: linear-gradient(135deg,
            rgba(255, 248, 240, 0.98) 0%,
            rgba(255, 235, 204, 0.95) 50%,
            rgba(255, 247, 230, 0.97) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 170, 0, 0.3);
            box-shadow:
                    0 15px 35px rgba(255, 119, 0, 0.15),
                    0 5px 15px rgba(255, 153, 0, 0.1),
                    inset 0 0 0 1px rgba(255, 255, 255, 0.8),
                    inset 0 0 20px rgba(255, 200, 100, 0.2);
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            margin-left:12px;
        }
        #but4,#but5,#but6,#but78,#but79{
            width: 80%;
            height: 84px;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            position: relative;
            margin: 0 auto;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        #but4 img, #but5 img,#but6 img, #but78 img,#but79 img{
            width: 76%;
            height: 62%;
            margin: 5px auto;
        }
        .modal-content-right{
            float:right;
            display:inline-block;
            width: 550px;
            height: 650px;
            /*background-color: #dfe79a;*/
            background: linear-gradient(135deg,
            rgba(255, 248, 240, 0.98) 0%,
            rgba(255, 235, 204, 0.95) 50%,
            rgba(255, 247, 230, 0.97) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 2px solid rgba(255, 170, 0, 0.3);
            box-shadow:
                    0 15px 35px rgba(255, 119, 0, 0.15),
                    0 5px 15px rgba(255, 153, 0, 0.1),
                    inset 0 0 0 1px rgba(255, 255, 255, 0.8),
                    inset 0 0 20px rgba(255, 200, 100, 0.2);
            position: relative;
            overflow: hidden;
            /*margin: 13px 14px 10px 0px;*/
            border-radius: 15px;
        }
        .choose_member_head{
            width: 95%;
            height: 37px;
            /*background: #e1f92d url(http://zkwsoft.cn/qtye/img/png_search.png) no-repeat 1% center;*/
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 10px;
            margin: 10px auto;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .choose_member_head input{
            border-style: none;
            margin-left: 25px;
            width: 87%;
            height: 100%;
            background-color: transparent;
            outline: none;
        }
        .choose_member_head a{
            position: absolute;
            line-height: 34px;
            right: 50px;
            text-decoration: underline;
            width: 66px;
            font-size: 14px;
            color: blue;
        }
        modal-content-right .choose_member>div{
            width: 380px;
            background-color: #EBEBEB;
            margin: auto;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
        }
        .member-info{
            height: 25px;
            display: flex;
            background-color: #EBEBEB;
            padding: 0 10px;
            color: #777;
        }
        .detailed_info{
            padding: 5px 25px;
            font-size: 13px;
            color: #9c9c9c;
            height: 48px;
        }
        .list{
            height: 120px;
            padding: 0 25px;
            font-size: 18px;
            margin-top: 10px;
            font-weight: bold;
        }
        .couponHint {
            display: flex;
            flex-direction: row;
            height: 30px;
            justify-content: space-between;
            align-items: center;
            padding: 0px 10px;
            border-top: 1px solid #eee;
            color: #0a0909;
            width: 90%;
            margin: 0px auto;
            font-size: 14px;
        }
        .pay_type{
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            align-content: flex-start;
            width: 95%;
            margin: 0 auto;
        }
        .pay_type>div{
            min-width: 100px;
            height: 30px;
            border: 1px solid #A4A4A4;
            border-radius: 5px;
            background-color: #FAFAFA;
            text-align: center;
            line-height: 30px;
            /* margin-right: 40px; */
            margin: 2px 4px;
            /* margin-bottom: 3px; */
            cursor: pointer;
            font-size: 14px;
        }
        .calculate{
            width: 92%;
            margin: 0 auto;
            margin-top: 10px;
        }
        .calculate table.table tr td:not(:last-child) {
            border: 1px solid #9c9c9c;
            font-weight: 600;
            color: #000;
            width: 84px;
            height: 58px;
            line-height: 58px;
            cursor: pointer;
        }
        .calculate table.table tr td:last-child {
            color: #dc9efe;
            border: 1px solid #9c9c9c;
            font-weight: 600;
            cursor: pointer;
        }
        .calculate table.table tr:first-child td.settle_finish {
            cursor: pointer;
            border-radius: 0;
            color: #ffffff;
            font-size: 20px;
            font-weight: bold;
            margin: 0;
            padding: 0;
            border: unset;
            outline: unset;
            background-color: #2890ff;
            font-size: 16px;
        }
        #zheko{
            left: 50%;
            top: 18%;
            transform: translateX(-50%);
            width: 600px;
            height: 400px;
            background-color: #F7F7F7;
            border: 1px solid white;
            border-radius: 9px;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        .zhekou_content{
            width: 97%;
            background: #fff;
            margin: 5px auto;
            border-radius: 6px;
            height: 265px;
            overflow: hidden;
        }
        .border-top{
            width: 97%;
            height: 60px;
            background-color: white;
            margin: 9px auto;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .border-top > label{
            margin-left: 15px;
            font-size: 13px;
        }
        .border-top > label>input{
            margin-right: 15px;
        }
        #qb_xz{
            outline: none;
            border: 1px solid #9c9c9c;
            height: 33px;
            border-radius: 6px;
            padding: 0 8px;
        }
        /*.itemxuanzhe{*/
        /*    transform: translateX(20px);*/
        /*}*/
        /*.itemName2{*/
        /*    transform: translateX(37px);*/
        /*}*/
        /*.itemNum2{*/
        /*    transform: translateX(-1px);*/
        /*}*/
        /*.itemAmount2{*/
        /*    transform: translateX(-43px);*/
        /*}*/
        /*.itemzheko{*/
        /*    transform: translateX(-21px);*/
        /*}*/
        /*.zhekou_content .title .table thead >.itemName2,*/
        /*.zhekou_content .title .table thead >.itemAmount2{*/
        /*    transform: translateX(0px);*/
        /*}*/
        #beizhu{
            width: 35%;
            height: 232px;
            margin: auto;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
            border-radius: 10px;
        }
        .modal-body{
            width: 96%;
            margin: 6px auto;
        }
        .index .jiezhang_mask{
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            border: none;
            border-radius: 0;
        }
        .con1{
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
        }
        #table1 tr td:not(:first-child){
            width: 103px;
            text-align: center;
        }
        #table2 tr td:not(:nth-child(2)){
            width: 89px;
            text-align: center;
        }
        #huiyuan{
            left: 50%;
            top: 18%;
            transform: translateX(-50%);
            width: 600px;
            height: 400px;
            background-color: #F7F7F7;
            border: 1px solid white;
            border-radius: 9px;
            box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
        }
        #huiyuan .modal-header{
            width: 97%;
        }
        #huiyuan .modal-body > div{
            background-color: #fff;
        }
    </style>
</head>
<style>
    /* 公共 */

    body {
        padding: 0;
        margin: 0;
        background: #fff;
        overflow-y: scroll;
    }
    .itemOrderNO,.itemName,.itemNum,.itemAmount{
        white-space: normal; word-wrap: break-word;
    }

    thead, tr, th, td {
        border: 0;
        margin: 0;
        padding: 0;
        /*width: 318px;*/
        background-color: rgba(255, 255, 255, 0);
        vertical-align: baseline;
        height: 37px;
        line-height: 37px;
        color: #000000;
    }

    a {
        text-decoration: none;
        color: #000;
    }

    ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .index {
        display: flex;
        height: 84%;
        width: 100%;
        background-color: #f7f7f7;
        /*background-image: url('https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500');*/
        /*background-image: url('../../images/diandan.webp');*/
        padding: 12px;
        background-image: url(../images/diandan-bg.png);
        background-size: 100% 109%;
    }

    .Lmenu {
        width: 20px;
        /*background: rgb(62, 35, 236);*/
    }

    .Lmenu .left {
        display: flex;
        flex-flow: column;
        min-height: 100vh;
        background: rgb(62, 35, 236);
    }

    .Lmenu ul li {
        text-align: center;
        margin-top: 14px;
        height: 68px;
        border-bottom: 1px solid #fff;
    }

    .Lmenu ul li a {
        color: #fff;
    }

    .Lmenu ul li .img {
        width: 50%;
        margin: 0 auto;
    }

    .Lmenu ul li img {
        width: 100%;
    }

    .Lblock {
        /*flex:1;*/
        /*width: 350px;*/
        /*margin-left: 10px;*/
        /*margin-right: 10px;*/
        /*min-height: 600px;*/
        flex: 2;
        display: flex;
        flex-direction: column;
        height: 91%;
        min-width: 320px;
        margin-right: 10px;
        color: #9c9c9c;
    }

    .Lblock table{
        table-layout: fixed;
    }

    .table{
        width: 100%;
        max-width: 100%;
        text-align: center;
    }

    table{
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
    }

    .Lblock .room_info{
        height: 50px;
        display: flex;
    }

    .Lblock .title{
        /*border-top: 1px solid #ccc;*/
        /*border-bottom: 1px solid #ccc;*/

    }

    .Lblock .title .itemOrderNO，
    .Lblock .cont .table tbody .itemOrderNO{
        text-align: center;
        width: 50px;
    }

    .Lblock .title .itemName，
    .Lblock .cont .table tbody .itemName{
        text-align:left;
    }

    .Lblock .title .itemNum，
    .Lblock .cont .table tbody .itemNum{
        text-align: center;
        width: 60px;
    }

    .Lblock .title .itemAmount,
    .Lblock .cont .table tbody .itemAmount{
        /*text-align: right;*/
        /*width: 60px;*/
    }

    .Lblock .room_info h4{
        font-size: 21px;
        font-weight: 400;
        /* margin: 0 5px 0 12px; */
        width: 155px;
        line-height: 50px;
        color: #1a1515;
    }
    .Lblock #empty_mask{
        flex: 1;
        overflow:hidden;
        width: 320px;
    }

    .Lblock .menu ul {
        display: flex;
        border-bottom: 2px solid darkgrey;
    }

    .Lblock .menu ul li {
        font-size: 14px;
        margin-right: 50px;
        margin-top: 5px;
        line-height: 45px;
        text-align: center;
        border-bottom: 2px solid darkgrey;
        margin-bottom: -2px;
    }

    .Lblock .menu ul li.hover {
        border-bottom: 2px solid rgb(49, 0, 247);
    }

    .Lblock .menu ul li.hover a {
        color: rgb(32, 32, 246);
    }

    .Lblock .menu ul li:hover {
        border-bottom: 2px solid rgb(49, 0, 247);
    }

    .Lblock .menu ul li:hover a {
        color: rgb(32, 32, 246);
    }

    .Lblock .table {
        margin-top: 1px;
        /*height: 87%;*/
    }

    .Lblock .table .title {
        display: flex;
        margin-top: 10px;
    }

    .Lblock .table .title li {
        width: 100%;
        border: 1px solid darkgrey;
        border-left: none;
        border-right: none;
        height: 50px;
        font-size: 16px;
        font-weight: bold;
        line-height: 50px;
        text-align: center;
        /* padding-left: 8px; */
        color: #606060;
    }

    .Lblock #empty_mask .cont .table tbody tr{
        height: 40px;
        color: #000;
        /*background-color: #ebe9e9;*/
        text-align: center;
        background-color:#f5e4a3f0
    }

    .Lblock #empty_mask .cont > table tbody tr{
        cursor: pointer;
    }

    /*.table-hover>tbody>tr:nth-of-type(odd){*/
    /*    background-color: #f9f9f9;*/
    /*}*/


    /*.Lblock .table .title li:last-child {*/
    /*    border-right: 1px solid darkgrey;*/
    /*}*/

    .Lblock #empty_mask .cont {
        /* width: 107%; */
        overflow-y: auto;
        font-size: 22px;
        height: 100%;
         /*width: calc(100% + 17px);*/
        scrollbar-width: none;
    }

    .Lblock #empty_mask .cont table{
        table-layout: fixed;
        /*width: 94%;*/
    }

    .Lblock .table .cont li {
        display: flex;
        background-color: lime;
        color: white;
    }

    .Lblock .cont li div {
        width: 100px;
        border: 1px solid darkgrey;
        border-right: 0;
        border-top: 0;
        height: 30px;
        line-height: 30px;
        padding-left: 8px;
        color: #606060;
        display: flex;
    }

    .Lblock .table .cont li div:last-child {
        border-right: 1px solid darkgrey;
    }

    .Lblock .table .cont li span {
        width: 22px;
        text-align: center;
        cursor: pointer;
        margin: 6px 5px;
        color: white;
        background-color: #ea2929;
        border-radius: 50%;
        font-size: 6px;
        font-weight: 600;
        border: 1px solid white;
        line-height: 13px;
        transition: .3s;
    }
    .Lblock .table .cont li span:hover{
        color: #ea2929;
        background-color: white;
        border: 1px solid #ea2929;
    }

    .Lblock .end {
        /*margin-top: 8px;*/
        padding: 9px 0px;
        width: 97%;
        font-size: 15px;
        color: #222;
        border-top: 1px solid #f5f5f5;


    }
    .Lblock .end span{
        color: red;

    }

    .Lblock .end .count,
    .Lblock .end .price_total{
        color: red;
        font-size: 30px;
    }

    .Lblock .button {
        display: flex;
        justify-content: center;
        margin-top: 10px;
        flex-direction: row;
        height: 50px;
    }

    .Lblock .button button {
        height: 42px;
        line-height: 42px;
        width: 72px;
        text-align: center;
        border: 0px;
        border-radius: 5px;
        cursor: pointer;
        margin: 0 10px;
        font-size: 16px;
    }

    .Lblock .button .but1 {
        color: #fff;
        background: rgb(231 192 63);
    }

    .Lblock .button .but2 {
        font-size: 30px;
        height: 60px;
        width: 180px;
        color: #fff;
        transition: .3s;
        /*flex: 0 50%;*/
        background: #ff0000b8;
        border-radius: 10px;
        box-shadow: 0px 5px 8px rgb(0 0 0 / 20%);
        font-weight: normal;
    }

    .Lblock .button > button{
        margin-bottom: 10px;
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #FFCF3D;
        font-weight: bold;
    }

    /*.Lblock .button .but2:hover{*/
    /*    color: rgb(246 103 103);*/
    /*    background-color: #5e5e5e;*/
    /*    border: 1px solid rgb(246 103 103);*/
    /*}*/

    .Lblock .button .but3 {
        width: 180px;
        height: 60px;
        font-size: 30px;
        color: #fff;
        transition: .3s;
        background: #fd9e1a;
        border-radius: 10px;
        box-shadow: 0px 5px 8px rgb(0 0 0 / 20%);
        font-weight: normal;
    }
    .but3:hover{
        transform: translateY(-5px);
        background: #d28315!important;
    }

    .but2:hover{
        transform: translateY(-5px);
        background: rgba(199, 2, 2, 0.72)!important;
    }
    .index >div{
        padding: 20px;
        /*background-color: #ffffff;*/
        /*background-color: rgb(0 135 187 / 20%);*/
        border: 1px solid #ececec;
        border-radius: 15px;

    }

    .btn{
        display: inline-block;
        padding: 6px 12px;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -ms-touch-action: manipulation;
        touch-action: manipulation;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background: #dce104;
        border: 1px solid transparent;
        margin-right: 10px;
        border-radius: 5px;
        width: 100px;
        height: 34px;
        line-height: 20px;
        font-size: 20px;
    }

    .btns{
        flex: 1;
        max-width: 130px;
        margin-right: 10px;
        height: 91%;
    }

    .btns>div{
        margin-top: 10px;
        height: 40px;
    }

    .btns button{
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #1dc41c;
        font-weight: normal;
        font-size: 30px
    }

    hr {
        margin-top: 20px;
        margin-bottom: 20px;
        border: 0;
        border-top: 1px solid #eee;
    }

    .btns .jia{
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color: #fdc139;
        font-weight: normal;
        font-size: 65px;
    }

    .btns .jian{
        justify-content: center;
        font-size: 90px;
        display: flex;
        width: 100%;
        height: 40px;
        line-height: 40px;
        padding: 0;
        background-color:#fff;
        font-weight: normal;
    }

    .Rblock {
        flex: 7;
        display: flex;
        flex-direction: column;
        height: 91%;
        overflow: hidden;
        min-width: 547px;
    }

    body{
        /*background: url(" ");*/
    }

    .Rblock .head {
        height: 50px;
        line-height: 50px;
        padding-left: 10px;
        border-bottom: 1px solid darkgray;
    }

    .Rblock .option {
        display: flex;
        margin: 10px;
        font-size: 14px;
        flex-wrap: wrap;
    }

    .Rblock .option li {
        cursor: pointer;
        padding: 0 10px;
        height: 36px;
        line-height: 36px;
        text-align: center;
        border: 1px solid darkgrey;
        margin: 5px;
    }

    .Rblock .Bmenu {
        position: relative;
        display: flex;
        margin: 5px auto;
        height: 53px;
        width: 97%;
        /* border-bottom: 2px solid #0AA0F6; */
        /*background-color: #fd9e1a;*/
        background: linear-gradient(90deg, #ff5500, #ffaa00, #ff5500);
        box-shadow: 0px 5px 8px rgb(10 160 246 / 30%);
        border-radius: 12px;
    }

    .Rblock .Bmenu .preMenu{
        /*flex: 1;*/
        position:absolute;
        left: 5px;
        width: 35px;
        height: 35px;
        margin: 0 5px;
        line-height: 55px;
    }
    .Rblock .Bmenu .nextMenu{
        /*flex: 1;*/
        width: 35px;
        height: 35px;
        position: absolute;
        right: 5px;
        line-height: 55px;
    }
    .Rblock .Bmenu .menu{
        /*flex: 7;*/
        display: flex;
        justify-content: flex-start;
    }

    .Rblock .Bmenu li {
        /*margin-right: 38px;*/
        margin-bottom: -2px;
    }

    .Rblock .Bmenu .hover {
        line-height: 36px;
        padding: 8px 2px;
        transition: .3s;
    }

    /*.Rblock .Bmenu li.hover:hover{*/
    /*    !*background-color: #077027;*!*/
    /*    !*border-bottom: 2px solid lime;*!*/
    /*}*/

    .Rblock .Bmenu .hover .menuType {
        /*color: rgb(32, 32, 246);*/
        color: white;
        font-size: 22px;
        font-weight: 400;
        padding: 7px 20px;
        /*background-color: #0AA0F6;*/
        border-radius: 17px;
        transition: .3s;
    }

    .menuType-active{
        background-color: #ffffff;!important;
        color: #0AA0F6;!important;
    }
    /*.Rblock .Bmenu li.hover a:hover{*/
    /*    color: white;*/
    /*    background-color: #077027;*/
    /*}*/
    /*active{*/
    /*    color: white;*/
    /*    background-color: #077027;*/
    /*}*/

    /*.Rblock .Bmenu li:hover {*/
    /*    border-bottom: 2px solid rgb(49, 0, 247);*/
    /*}*/

    /*.Rblock .Bmenu li:hover a {*/
    /*    color: rgb(32, 32, 246);*/
    /*}*/

    .Rblock .Bmenu li:first-child {
        margin-left: 11px;
    }

    .Rblock .block {
        display: flex;
        flex-wrap: wrap;
        margin: 12px auto;
        width: 98%;
    }

    .Rblock .block li {
        display: flex;
        border: 1px solid darkgrey;
        width: 244px;
        min-height: 72px;
        margin: 5px 5px 10px;
        cursor: pointer;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 2px 2px 4px rgb(0 0 0 / 50%);
        transition: .3s;
        font-weight: 400;
    }
    .Rblock .block li:hover{
        transform: translateY(-5px);
    }

    .Rblock .block li .img {
        width: 55%;
        height: 118px;
    }

    .Rblock .block li img {
        width: 100%;
        height:100%;
    }

    .product_details{
        width: 48%;
        font-size: 20px;
        justify-content: space-between;
        /*color: rgb(63, 175, 255);*/
        padding: 8px;
        background: #96d7eb52;
    }

    .Rblock .block li .title {
        color: rgb(0, 0, 0);
        /*margin-left: 10px;*/
        margin-top: 14px;
        text-align: center;
    }

    .Rblock .block li .money {
        margin-top: 36px;
        margin-right: 0;
        color: rgb(255, 0, 0);
        text-align: center;
    }

    #empty_mask {
        /*border-left: 1px solid darkgrey;*/
        /*border-right: 1px solid darkgrey;*/
        text-align: center;
        line-height: 72px;
        height: 75%;
        text-align: center;
        line-height: 23em;
        color: darkgrey;
    }

    .room_info #danhao{
        height: 36px;
        transition: .3s;
        margin-top: 8px;
        font-size: 24px;
        border: none;
    }
    .room_info #danhao1{
        height: 36px;
        transition: .3s;
        margin-top: 8px;
        font-size: 20px;
        border: none;
    }

    .room_info #danhao:focus{
        outline: #006eb0;
    }

    .Lblock .table .cont li div.none {
        display: none;
    }
    /* 容器样式 */
    .Lblock .table .cont li {
        list-style-type: none; /* 移除默认的列表样式 */
        padding: 10px;         /* 添加内边距 */
        margin: 5px 0;         /* 添加外边距 */
        border-bottom: 1px solid #ddd; /* 添加下边框 */
    }

    /* 隐藏具有特定类名的 div 元素 */
    .Lblock .table .cont li div.none {
        display: none;
    }

    /* 可选：为显示的 div 元素添加样式 */
    .Lblock .table .cont li div {
        padding: 5px;
        background-color: rgba(234, 234, 254, 0.88); /* 背景色 */
        border: 1px solid #3b7ddd;    /* 边框 */
        margin-top: 5px;           /* 上边距 */
    }

    .none {
        display: none;
    }

    .form_input{
        width: 180px;
        height: 30px;
        outline: none;
        /*border: 1px solid #b7aec7;*/
        border-radius: 3px;
        padding-left: 8px;
        font-size: 19px;
        margin-top: 11px;
        border: none;
    }
    .detailed_info > p:not(:first-child) {
        width: 100%;
        height: 35px;
        font-size: 19px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #000000;
        /*background-color: #ffb099;*/
        background: linear-gradient(135deg, #ff5500, #ff7700);
        padding: 0 -2 10px;
        border-radius: 6px;
    }
    .modal-body .search input{
        outline: none;
        line-height: 1.5;
        width: 96%;
        height: 26px;
        border-radius: 10px;
        background: #ebebeb url(http://zkwsoft.cn/qtye/img/png_search.png) no-repeat right center;
        border: 1px solid #ccc;
        padding: 6px 12px;
        font-size: 14px;
        color: #555;
    }
    .modal-body .member-list{
        height: 244px;
        over-flow-y:scroll;
    }
    .modal-footer{
        padding: 15px;
        text-align: right;
        border-top: 1px solid #e5e5e5;
    }
    .pagination{
        display: inline-block;
        padding-left: 0;
        border-radius: 4px;
    }
    .pagination >li{
        display: inline;
    }
    .pagination>li>a{
        position: relative;
        float: left;
        padding: 6px 12px;
        border: 1px solid #ddd;

    }
    .pagination >li:first-child>a{
        margin-left: 0;
        border-top-left-radius: 4px;
        border-bottom-right-radius: 4px;
    }
    .huiyuan_footer_close{
        color: #fff;
        background-color: #118eeb;
        padding: 6px 36px;
        display: inline-block;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        border: 1px solid transparent;
        border-radius: 5px;
        height: 34px;
        vertical-align: middle;
    }
    #Product_detail{
        width: 700px;
        height: 500px;
        background-color: #F7F7F7;
        /* margin: 10vh; */
        /*background-image: url("https://img1.baidu.com/it/u=1695799435,3749054909&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500");*/
        background-image: url('../images/diandan-bg.png');
        background-size: cover;
        left: 50%;
        top: 10%;
        transform: translateX(-50%);
        /* transform: translateY(-50%); */
        border: 1px solid white;
        box-shadow: 0 5px 15px rgb(0 0 0 / 50%);
    }
    .details_modal-content{
        /*border: 1px solid;*/
        width: 100%;
        height: 79%;
        background-color: rgb(0 135 187 / 20%);
        /*background: yellow;*/
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .modal-content-l{
        /*border: 1px solid;*/
        width: 10000%;
        height: 100%;
        /*background: green;*/
        border-radius: 6px;
        flex-grow: 1;
        margin-left: 0px;
        overflow: hidden;
        /*background:url('https://img0.baidu.com/it/u=1779250852,1799309111&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=889') no-repeat center;*/
        /*background-size: 265px 483px;*/
    }
    .modal-content-l img{
        width: 100%;
        height: 100%;
        /*transform: translateX(-302px);*/
    }
    .modal-content-r-header{
        width: 100%;
        height: 27px;
        text-align: center;
        margin: 5px auto;
        font-weight: 600;
    }
    .modal-content-r{
        width: 10000%;
        height: 90%;
        /*background: blue;*/
        flex-grow: 1;
        padding: 10px 20px;
        margin-left: 23px;
    }
    .modal-footer .Product_details_close ,
    .modal-footer .Product_details_Ok{
        color: #fff;
        background-color: #fd9d1a;
        padding: 6px 36px;
        display: inline-block;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        border: 1px solid transparent;
        border-radius: 5px;
        height: 34px;
        vertical-align: middle;
    }
    .product_details_type,
    .product_details_count,
    .product_details_specification,
    .product_details_flavor,
    .product_details_price{
        margin-top: 10px;
        height: 45px;
        line-height: 45px;
    }
    .product_details_type input,
    .product_details_count input,
    .product_details_price input{
        height: 29px;
        border:none;
        border-radius: 6px;
        outline: none;
        padding: 2px 7px;
        margin-left: 10px;
        font-size: 16px;
        text-align: center;
    }
    .product_details_specification select,
    .product_details_flavor select{
        width: 210px;
        text-align: center;
        height: 31px;
        border-radius: 6px;
        border: none;
        margin-left: 10px;
        outline: none;
    }
    .modal-content-r-content{
        color: #000;
    }
    .product_details_id{
        display: none;
    }
    .memeber_info{
        width: 91%;
        height: 37px;
        border-radius: 10px;
        margin: 10px auto;
        display: flex;
        justify-content: space-around;
        align-items: center;
        background: #EBEBEB;
    }
    #huiyuan_table tbody td{
        cursor: pointer;
    }



    .glass-container {
        overflow: hidden;
        width: 80%;
        padding: 2.5rem;
        /*background: rgba(255, 255, 255, 0.15);*/
        /*background: linear-gradient(178deg, rgb(0 91 234 / 35%), #00c6fb94);*/
        background: linear-gradient(178deg, rgba(255, 165, 0, 0.35), rgba(255, 102, 0, 0.58));
        border-radius: 20px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2),
        0 5px 15px rgba(0, 0, 0, 0.1),
        inset 0 0 15px rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        color: white;
        text-align: center;
    }
    .glass{

        background: rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2),
        0 5px 15px rgba(0, 0, 0, 0.1),
        inset 0 0 15px rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        color: white;
        text-align: center;
    }

    /* 装饰性粒子 */
    .particle {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        animation: float 15s infinite linear;
    }


    /* 动画定义 */
    @keyframes float {
        0% { transform: translateY(0) rotate(0deg); }
        100% { transform: translateY(-100vh) rotate(360deg); }
    }

    @keyframes ripple {
        to {
            transform: scale(2);
            opacity: 0;
        }
    }

    .anniu{
        display: flex;
        width: 100%;
    }

    .container {
        width: 95%;
        max-width: 1200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .index-top {
        width: 100%;
        height: 10%;
        overflow: hidden;
        background: linear-gradient(178deg, rgba(255, 165, 0, 0.5), rgba(255, 102, 0, 0.6)); /* 调整为橙色系渐变 */
        border-radius: 16px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.25);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2),
        0 5px 15px rgba(0, 0, 0, 0.15),
        inset 0 0 15px rgba(255, 255, 255, 0.15);
        transition: all 0.3s ease;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 30px;
        position: relative;
        overflow: hidden;
    }

    .index-top::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
                45deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent
        );
        transform: rotate(45deg);
        animation: shimmer 6s infinite linear;
    }

    @keyframes shimmer {
        0% {
            transform: rotate(45deg) translateX(-50%);
        }
        100% {
            transform: rotate(45deg) translateX(50%);
        }
    }

    .bioati {
        width: 22%;
        display: flex;
        align-items: center;
        animation: slideInLeft 1s ease-out, pulseTitle 3s infinite 1s;
        position: relative;
        z-index: 2;
        padding-bottom: 10px;
        border-bottom: none;
    }

    .bioati::after {
        content: '';
        position: absolute;
        bottom: 0;
        /*left: 15%; !* 从15%位置开始 *!*/
        width: 70%; /* 宽度为整体的70% */
        height: 4px;
        background: linear-gradient(90deg, #ff5500, #ffaa00, #ff5500);
        border-radius: 2px;
        box-shadow: 0 2px 8px rgba(255, 119, 0, 0.4);
    }

    .bioati h1 {
        font-size: 28px;
        font-weight: 700;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
    }

    .bioati h1 i {
        margin-right: 12px;
        font-size: 32px;
        background: linear-gradient(45deg, #ff9a9e, #fad0c4);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: rotateIcon 5s infinite linear;
    }

    .middle-animation {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
        width: 80%;
        height: 80%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .pulse-circle {
        position: absolute;
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        animation: pulse 2s infinite ease-in-out;
    }

    .pulse-circle:nth-child(1) {
        animation-delay: 0s;
    }

    .pulse-circle:nth-child(2) {
        width: 150px;
        height: 150px;
        animation-delay: 0.5s;
    }

    .pulse-circle:nth-child(3) {
        width: 200px;
        height: 200px;
        animation-delay: 1s;
    }

    .floating-icons {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    .floating-icons i {
        position: absolute;
        font-size: 24px;
        color: rgba(255, 255, 255, 0.7);
        animation: float 6s infinite ease-in-out;
    }

    .floating-icons i:nth-child(1) {
        top: 20%;
        left: 30%;
        animation-delay: 0s;
    }

    .floating-icons i:nth-child(2) {
        top: 60%;
        left: 40%;
        animation-delay: 1s;
    }

    .floating-icons i:nth-child(3) {
        top: 40%;
        left: 60%;
        animation-delay: 2s;
    }

    .floating-icons i:nth-child(4) {
        top: 70%;
        left: 20%;
        animation-delay: 3s;
    }

    .floating-icons i:nth-child(5) {
        top: 30%;
        left: 70%;
        animation-delay: 4s;
    }

    .xinxi {
        width: 35%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        animation: slideInRight 1s ease-out 0.3s both, glowInfo 4s infinite 2s;
        position: relative;
        z-index: 2;
        margin-right: 35px;
    }

    .xinxi h3 {
        font-size: 18px;
        font-weight: 500;
        display: flex;
        align-items: center;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        padding: 10px 15px;
        background: linear-gradient(90deg, #ff5500, #ffaa00, #ff5500);
        border-radius: 12px;
        backdrop-filter: blur(5px);
        transition: all 0.3s ease;
        animation: bounceIn 1s 0.5s both;
    }

    .xinxi h3:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .xinxi h3 i {
        margin-right: 8px;
        font-size: 20px;
        color: #ffdd00;
        animation: spin 3s infinite linear;
    }

    /* 动画定义 */
    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes pulse {
        0% {
            transform: scale(0.8);
            opacity: 0.7;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.3;
        }
        100% {
            transform: scale(0.8);
            opacity: 0.7;
        }
    }

    @keyframes float {
        0% {
            transform: translateY(0) rotate(0deg);
            opacity: 0.7;
        }
        50% {
            transform: translateY(-20px) rotate(180deg);
            opacity: 1;
        }
        100% {
            transform: translateY(0) rotate(360deg);
            opacity: 0.7;
        }
    }

    @keyframes pulseTitle {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }
        100% {
            transform: scale(1);
        }
    }

    @keyframes glowInfo {
        0% {
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
        }
        50% {
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.7));
        }
        100% {
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
        }
    }

    @keyframes rotateIcon {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes bounceIn {
        0% {
            opacity: 0;
            transform: scale(0.3);
        }
        50% {
            opacity: 1;
            transform: scale(1.05);
        }
        70% {
            transform: scale(0.9);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    /* 响应式设计 */
    @media (max-width: 900px) {
        .index-top {
            flex-direction: column;
            height: auto;
            padding: 20px;
        }

        .bioati, .xinxi {
            width: 100%;
            justify-content: center;
            margin: 10px 0;
        }

        .xinxi {
            flex-direction: column;
        }

        .xinxi h3 {
            margin: 8px 0;
            width: 100%;
            text-align: center;
            justify-content: center;
        }

        .middle-animation {
            display: none;
        }
    }
    .boy{
        width: 100%;
        height: 100%;
    }

    .decoration-area {
        position: relative;
        height: 60px;
        margin: 10px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .animated-line {
        width: 80%;
        height: 2px;
        background: linear-gradient(90deg, transparent, #ff7700, transparent);
        margin: 10px 0;
        position: relative;
        overflow: hidden;
    }

    .animated-line::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, #fff, transparent);
        animation: shimmer 3s infinite;
    }

    .floating-icons {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 8px 0;
    }

    .icon {
        font-size: 20px;
        animation: float 4s ease-in-out infinite;
        opacity: 0.8;
    }

    .icon:nth-child(1) { animation-delay: 0s; }
    .icon:nth-child(2) { animation-delay: 0.5s; }
    .icon:nth-child(3) { animation-delay: 1s; }
    .icon:nth-child(4) { animation-delay: 1.5s; }

    .pulse-dots {
        display: flex;
        gap: 15px;
        margin-top: 5px;
    }

    .dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #ff7700;
        animation: pulse 2s infinite;
    }

    .dot:nth-child(1) { animation-delay: 0s; }
    .dot:nth-child(2) { animation-delay: 0.3s; }
    .dot:nth-child(3) { animation-delay: 0.6s; }

    @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
    }

    @keyframes pulse {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.5); }
    }


    .select-input {
        width: 28%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .search-container {
        display: flex;
        align-items: center;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.98));
        border-radius: 25px;
        padding: 5px;
        border: 1px solid rgba(255, 170, 0, 0.3);
        box-shadow: 0 4px 15px rgba(255, 119, 0, 0.15);
        backdrop-filter: blur(10px);
        width: 80%;
        max-width: 500px;
    }

    .search-input {
        flex: 1;
        border: none;
        outline: none;
        padding: 12px 20px;
        font-size: 16px;
        background: transparent;
        color: #333;
        border-radius: 20px 0 0 20px;
    }

    .search-input::placeholder {
        color: #999;
        font-weight: 300;
    }

    .search-input:focus {
        background: rgba(255, 247, 240, 0.8);
    }

    .search-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px 20px;
        border: none;
        background: linear-gradient(135deg, #ff7700, #ffaa00);
        color: white;
        border-radius: 20px;
        cursor: pointer;
        font-weight: 500;
        font-size: 14px;
        transition: all 0.3s ease;
        white-space: nowrap;
    }

    .search-btn:hover {
        background: linear-gradient(135deg, #ff5500, #ff8800);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 119, 0, 0.3);
    }

    .search-btn:active {
        transform: translateY(0);
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
        .search-container {
            width: 95%;
            flex-direction: column;
            border-radius: 15px;
        }

        .search-input {
            border-radius: 15px;
            margin-bottom: 8px;
            text-align: center;
        }

        .search-btn {
            width: 100%;
            justify-content: center;
            border-radius: 15px;
        }
    }

    /* 动画效果 */
    .search-container {
        animation: slideDown 0.5s ease-out;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .search-input:focus {
        animation: inputFocus 0.3s ease;
    }

    @keyframes inputFocus {
        from {
            box-shadow: none;
        }
        to {
            box-shadow: inset 0 0 0 2px rgba(255, 119, 0, 0.3);
        }
    }


    .inactive-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(10px);
        z-index: 9999;
        display: none;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.5s ease;
    }

    .inactive-overlay.active {
        display: flex;
        opacity: 1;
        animation: fadeIn 0.5s ease;
    }

    .carousel-container {
        position: relative;
        width: 100%;
        /*max-width: 1000px;*/
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    }

    .carousel-slides {
        width: 100%;
        height: 100%;
        position: relative;
    }

    .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 0.8s ease, transform 0.8s ease;
        transform: scale(0.95);
    }

    .slide.active {
        opacity: 1;
        transform: scale(1);
        z-index: 2;
    }

    .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        filter: brightness(0.7);
    }

    .slide-content {
        position: absolute;
        bottom: 20%;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    }

    .slide-content h3 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .slide-content p {
        font-size: 1.2rem;
        opacity: 0.9;
    }

    .carousel-controls {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
        z-index: 3;
        transform: translateY(-50%);
    }

    .prev-btn, .next-btn {
        background: rgba(255, 119, 0, 0.8);
        border: none;
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .prev-btn:hover, .next-btn:hover {
        background: rgba(255, 119, 0, 1);
        transform: scale(1.1);
    }

    .carousel-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 3;
    }

    .carousel-dots .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .carousel-dots .dot.active {
        background: #ff7700;
        transform: scale(1.2);
    }

    .close-overlay {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 119, 0, 0.9);
        border: none;
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: bold;
        z-index: 4;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .close-overlay:hover {
        background: rgba(255, 119, 0, 1);
        transform: translateY(-2px);
    }

    /* 动画效果 */
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes slideIn {
        from {
            transform: translateY(50px) scale(0.9);
            opacity: 0;
        }
        to {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
    }

    .carousel-container {
        animation: slideIn 0.7s ease;
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
        .carousel-container {
            width: 95%;
            height: 60vh;
        }

        .slide-content h3 {
            font-size: 1.8rem;
        }

        .slide-content p {
            font-size: 1rem;
        }

        .prev-btn, .next-btn {
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
        }
    }


    .end {
        background: linear-gradient(135deg,
        rgba(255, 248, 240, 0.95) 0%,
        rgba(255, 235, 204, 0.9) 100%);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        border: 2px solid rgba(255, 170, 0, 0.25);
        box-shadow:
                0 8px 25px rgba(255, 119, 0, 0.12),
                0 4px 12px rgba(255, 153, 0, 0.08),
                inset 0 0 0 1px rgba(255, 255, 255, 0.6),
                inset 0 0 15px rgba(255, 200, 100, 0.15);
        justify-content: space-around;
        align-items: center;
        position: relative;
        overflow: hidden;
        margin-bottom: 5px;
        display: flex;
        justify-content: space-between;
    }

    .end::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background:
                radial-gradient(circle at 20% 50%, rgba(255, 200, 100, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(255, 170, 0, 0.08) 0%, transparent 50%);
        pointer-events: none;
    }


    .end > div:first-child {
        color: #ff7700;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(255, 119, 0, 0.2);
    }

    .end > div:last-child {
        color: #ff5500;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(255, 85, 0, 0.2);
    }

    .count {
        font-size: 32px;
        font-weight: bold;
        color: #ff7700;
        text-shadow: 1px 1px 3px rgba(255, 119, 0, 0.3);
        background-color: #1ec413;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    /*.counts {*/
        /*font-size: 32px;*/
        /*font-weight: bold;*/
        /*color: #ff7700;*/
        /*text-shadow: 1px 1px 3px rgba(255, 119, 0, 0.3);*/
        /*background: linear-gradient(135deg, #ff7700, #ffaa00);*/
        /*-webkit-background-clip: text;*/
        /*-webkit-text-fill-color: transparent;*/
        /*background-clip: text;*/
    /*}*/

    .price_total {
        font-size: 32px;
        font-weight: bold;
        color: #ff5500;
        text-shadow: 1px 1px 3px rgba(255, 85, 0, 0.3);
        background-color: red;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        padding: 0 5px;
    }

    /* 金额符号样式 */
    .end > div:last-child > span:first-child {
        font-size: 28px;
        font-weight: bold;
        color: #ff7700;
        text-shadow: 1px 1px 2px rgba(255, 119, 0, 0.3);
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
        .end {
            flex-direction: column;
            gap: 15px;
            padding: 15px 20px;
        }

        .end > div {
            width: 100%;
            justify-content: center;
            padding: 12px 20px;
        }

        .count,
        .price_total {
            font-size: 28px;
        }

        .end > div:last-child > span:first-child {
            font-size: 24px;
        }
    }

    /* 动画效果 */
    .end > div {
        animation: slideUp 0.5s ease-out;
    }

    .end > div:last-child {
        animation-delay: 0.1s;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* 数字变化动画 */
    .count,
    .price_total {
        transition: all 0.5s ease;
    }

    .count.animate,
    .price_total.animate {
        animation: pulse 0.6s ease;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.2);
        }
        100% {
            transform: scale(1);
        }
    }

    .youhui{
        height: 0px;
        overflow: hidden;
    }


    .con1.youhui input {
        flex: 1;
        padding: 10px 12px;
        border: 2px solid #dee2e6;

        border-radius: 6px;
        font-size: 15px;
        text-align: right;
        background: white;
        transition: all 0.3s ease;
        color: #2c3e50;
        font-weight: 500;
    }

    /* 输入框聚焦状态 */
    .con1.youhui input:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }


    .payTypeBox {
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 8px;
        margin: 10px 0;
    }

    .pay_type {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
    }

    .pay_type div {
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        text-align: center;
        min-width: 100px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        border: 2px solid transparent;
    }

    .pay_type div:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .pay_type div:active {
        transform: translateY(0);
    }

    /* 现金样式 */
    .pay_type div[data-name="现金"] {
        background-color: #4CAF50;
        color: white;
    }

    /* 储值卡样式 */
    .pay_type div[data-name="储值卡"] {
        background-color: #2196F3;
        color: white;
    }

    /* 银行卡样式 */
    .pay_type div[data-name="银行卡"] {
        background-color: #607D8B;
        color: white;
    }

    /* 代金券样式 */
    .pay_type div[data-name="代金券"] {
        background-color: #E91E63;
        color: white;
    }

    /* 微信样式 */
    .pay_type div[data-name="微信"] {
        background: linear-gradient(45deg, #07C160, #00A0E9);
        color: white;
    }

    /* 选中状态 */
    .pay_type div.selected {
        border: 2px solid #FFD700;
        box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.3);
    }

</style>

<body>

<div class="inactive-overlay">
    <div class="carousel-container">
        <div class="carousel-slides">
            <div class="slide active">
                <img src="https://picsum.photos/id/1015/600/400" alt="促销活动1">
                <div class="slide-content">
                    <h3>限时特惠</h3>
                    <p>全场商品8折起，快来选购！</p>
                </div>
            </div>
            <div class="slide">
                <img src="https://picsum.photos/id/1018/600/400" alt="新品上市">
                <div class="slide-content">
                    <h3>新品推荐</h3>
                    <p>最新商品火热上市中</p>
                </div>
            </div>
            <div class="slide">
                <img src="https://picsum.photos/id/1024/600/400" alt="会员专享">
                <div class="slide-content">
                    <h3>会员特权</h3>
                    <p>注册会员享更多优惠</p>
                </div>
            </div>
        </div>
        <div class="carousel-controls">
            <button class="prev-btn">‹</button>
            <button class="next-btn">›</button>
        </div>
        <div class="carousel-dots"></div>
        <button class="close-overlay">× 关闭</button>
    </div>
</div>
<div class="boy">
    <div class="index-top">
        <div class="bioati">
            <h1>智慧门店结算面板</h1>
        </div>

        <div class="decoration-area">
            <div class="animated-line"></div>
            <div class="floating-icons">
                <span class="icon">💰</span>
                <span class="icon">🛒</span>
                <span class="icon">📱</span>
                <span class="icon">🎯</span>
            </div>
            <div class="pulse-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>

        <div class="select-input">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="请搜索商品名称...">
                <button class="search-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
                              stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    搜索
                </button>
            </div>
        </div>

        <div class="xinxi">
            <h3 class="renshu">累计结账：0人</h3>
            <h3>当前时间：2025/09/10 16:40:15</h3>
        </div>
    </div>

<div class="index">
<!--    <input type="hidden" value="{{datas2 }}" id="datas2">-->
<!--    <div class="Lmenu">-->
<!--    </div>-->
    <div class="Lblock glass-container advanced-container" data-bg-id="1" style="margin-right: 10px">
        <!--        <div class="menu">-->
        <!--            <ul>-->
        <!--            </ul>-->
        <!--        </div>-->
        <!--        <div class="table">-->
        <div class="room_info">
            <h4>消费单号：</h4>
            <div class="input_order" style="width: 300px;">
                <input class="form_input" id="danhao" name="danhao" value=""/>
            </div>
        </div>
        <!--           <div class="title">-->
        <!--               <li style="border-radius:15px 0px 0px 0px">商品名称</li>-->
        <!--               <li>数量</li>-->
        <!--               <li>金额</li>-->
        <!--               <li style="border-radius:0px 15px 0px 0px">操作</li>-->
        <!--           </div>-->
        <div class="title" style=" color: #75c0ff; font-size: 22px;">
            <table class="table">
                <thead>
                <tr style="background: linear-gradient(90deg, #ff5500, #ffaa00, #ff5500);border-radius: 10px;">
                    <td class="itemOrderNO" style="width: 68px   ;  border-radius: 10px 0 0 0px;">序号</td>
                    <td class="itemName" style="width: 68px">商品名称</td>
                    <td class="itemNum" style="width: 68px">数量</td>
                    <td class="itemAmount" style="width: 41px ;border-radius: 0px 10px 0px 0;">金额</td>
                </tr>
                </thead>
            </table>
        </div>
        <div id="empty_mask">
            <div class="cont">
                <table id="table" class="table table-hover">
                    <tbody>
                    <!--                        //自动添加商品-->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="end">
            <div style="font-size:20px;float: left;color: #118eeb; ">
                总数量:
                <span class="counts">0</span>
            </div>
            <div style="font-size:20px;float: left;color: #118eeb;">
                合计金额:
                <span style="color:red;">
                    ￥
                    <span class="price_total" style="color:red;">
                        0.00
                    </span>
                </span>

            </div>
        </div>
        <div class="  advanced-container anniu" data-bg-id="2"  >

            <!--<div>-->
            <!--<li target="main"><img src="../images/企业微信截图_1737706980108.png" style="width:35px;height: 35px"></li>-->
            <!--</div>-->
            <div>
                <button id="jia" class="btn jia">+</button>
            </div>
            <div>
                <button id="jian" class="btn jian"><p style="line-height: 25px;">-</p></button>
            </div>
            <div>
                <button id="is_zengsong" class="btn is_zengsong">赠送</button>
            </div>
        </div>
        <div class="button">
            <button class="but2" btnflag="cancel">作废</button>
            <button id="but3" class="but3">结账</button>
        </div>


    </div>
    <div class="Rblock  glass-container advanced-container" data-bg-id="3">
        <div class="Bmenu">
            <div class="menu">
                <li class="hover">
                    <a href="#" class="menuType menu-a" id="Bmenu_showAll">全部</a>
                </li>
                {% for item in types %}
                <li class="hover">
                    <a href="#" class="menuType">{{item.type}}</a>
                </li>
                {% endfor %}
            </div>
        </div>
        <ul class="block">

            {% for item in datas %}
            <li>
                <div class="img">
                    <img src="{{item.photo}}" alt="">
                </div>
                <div class="product_details">
                    <div class="title">
                        {{item.product_name}}
                    </div>
                    <div class="money">￥<span>{{item.price.split(",")[0]}}</span>元</div>
                </div>
                <div class="none id">{{item.id}}</div>
            </li>
            {% endfor %}
        </ul>
    </div>


    <!--<div class="btns  glass-container advanced-container" data-bg-id="2" >-->

        <!--&lt;!&ndash;<div>&ndash;&gt;-->
            <!--&lt;!&ndash;<li target="main"><img src="../images/企业微信截图_1737706980108.png" style="width:35px;height: 35px"></li>&ndash;&gt;-->
        <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--<div>-->
            <!--<button id="jia" class="btn jia">+</button>-->
        <!--</div>-->
        <!--<div>-->
            <!--<button id="jian" class="btn jian"><p style="line-height: 25px;">-</p></button>-->
        <!--</div>-->
        <!--<div>-->
            <!--<button id="is_zengsong" class="btn is_zengsong">赠送</button>-->
        <!--</div>-->
    <!--</div>-->


    <!--    遮罩层-->
    <div class="jiezhang_mask"></div>
    <!--    商品详情窗口-->
    <div id="Product_detail" class="modal fade">
        <div class="modal-header" id="Product_detail_move">
            <div class="modal-title modal-title-left">商品详情</div>
            <div class="modal-title modal-title-right" onclick="jQuery('#Product_detail').hide();jQuery('.jiezhang_mask').hide()">
                <img src="../../images/guanbi.png">
            </div>
        </div>
        <div class="modal-body"></div>
        <div class="details_modal-content glass">
            <!--            商品图片栏-->
            <div class="modal-content-l">

            </div>
            <!--            商品选项栏-->
            <div class="modal-content-r">
                <div class="modal-content-r-header">
                    商品名称
                </div>
                <div class="modal-content-r-content">
                    <div class="product_details_type">
                        商品类型
                        <input id="xiangqing_type" type="text" value="">
                    </div>
                    <div id="product_details_count" class="product_details_count">
                        商品数量
                        <input type="text" value="">
                    </div>
                    <div id="product_details_specification" class="product_details_specification">
                        商品规格
                        <select>

                        </select>
                    </div>
                    <div class="product_details_flavor">
                        商品口味
                        <select>

                        </select>
                    </div>
                    <div class="product_details_price">
                        商品价格
                        <input id="xiangqing_Price" type="text" value="">
                    </div>

                    <div class="product_details_content" style="display: flex; align-items: center; gap: 10px; margin-left: 17px;">
                        详情内容
                        <textarea id="xiangqing_content" style="width: 210px;" rows="3"></textarea>
                    </div>

                    <div class="product_details_id">
                        商品id
                        <input id="product_details_id_input" type="text" value="">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="Product_details_Ok">
            添加购物车
            </button>
            <button class="Product_details_close" onclick="jQuery('#Product_detail').hide();jQuery('.jiezhang_mask').hide()">
                关闭
            </button>
        </div>
    </div>
    <!--    结账窗体-->
    <div id="jiezhang" class="modal fade" tabindex="-1"   src="../images/logo.png" style="width:1122px;height: 700px" >
        <!--<img src="https://img1.baidu.com/it/u=589959643,4213752690&fm=253&fmt=auto&app=138&f=JPEG?w=608&h=405">-->



        <div class="modal-dialog modal-lg">
            <div class="modal-content" id="lll">
                <div id="jiezhang_move" class="modal-header">
                    <div class="modal-title modal-title-left"> <div class="sppz" style="font-size: 20px">商品结账</div></div>

                    <div class="modal-title modal-title-right" onclick="jQuery('#jiezhang').hide();jQuery('.jiezhang_mask').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <table id="show-chuku-table"></table>
                </div>
                <div class="modal-content-left">
<!--                    <div class="room_info">-->
<!--                       消费单号：-->
<!--                        <div class="input_order" style="width: 300px;">-->
<!--                            <input style="" class="form_input" id="danhao1" name="danhao" value="888888888888888"/>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="title">
                        <table class="table">
                            <thead>
                            <tr style="border-bottom: 4px solid #d8e1e6;">
                                <td class="itemName1"style="transform: translateX(2px);width: 130px">商品名称</td>
                                <td class="itemNum1"style="transform: translateX(1px);">数量</td>
                                <td class="itemAmount1" style="transform: translateX(2px);">金额</td>
                                <td class="itemzheko"style="transform: translateX(2px);">折扣</td>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="empty_mask1">
                        <div class="cont">
                            <table id="table1" class="table table-hover">
                                <tbody>
                                <!--    //自动添加商品-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-content-center">
                    <div id="but4">
                        <!--<img src="https://img1.baidu.com/it/u=589959643,4213752690&fm=253&fmt=auto&app=138&f=JPEG?w=608&h=405">-->
                        <img src="../../images/zhe.webp">
                        <span >折&nbsp扣</span>
                    </div>
                    <!--<div><img src="../../images/zheko1.png" style="width: 80px;height: 80px;margin-left: 2px;margin-top: 5px"><span>折扣</span></div>-->
                    <div id="but5">
                        <img src="../images/免单.png">
                        <!--<img src="http://zkwsoft.cn/qtye/img/png_miandan.png">-->
                        <span >免&nbsp单</span>
                    </div>
                    <div id="but6">
                        <!--<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">-->
                        <!--<img src="https://img2.baidu.com/it/u=562474378,1823153239&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500">-->
                        <img src="../../images/beizhu.webp">
                        <span >备&nbsp注</span>
                    </div>
                    <!--<div id="but78">-->
                        <!--&lt;!&ndash;<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">&ndash;&gt;-->
                        <!--<img src="https://img.sxsme.com.cn/uploadimg/ico/2022/0830/1661845499557226.jpg">-->
                        <!--<span >开&nbsp票</span>-->
                    <!--</div>-->
                    <!--<div id="but79">-->
                        <!--&lt;!&ndash;<img src="http://zkwsoft.cn/qtye/img/png_beizhu.png">&ndash;&gt;-->
                        <!--<img src="https://img2.baidu.com/it/u=2971057363,1347840469&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500">-->
                        <!--<span >抹&nbsp零</span>-->
                    <!--</div>-->
                </div>
                <div class="modal-content-right">
                        <div class="choose_member">
                            <div>
                                <div class="choose_member_head">
                                    <input style="border-style: none;" type="text" maxlength="11" name="" value="" class="search form-control" placeholder="会员姓名/手机号/卡号(扫码/回车)">
                                    <a id="huiyuan_xz" href="javascript:;" class="choose_oneMem" data-prem="0205001">选择会员</a>
                                </div>
                                <div class="memeber_info" style="display: none;">

                                </div>
                            </div>
                        </div>
                        <!-- 辅助搜索会员提示 -->
                        <div class="tishi_list" style="display: none;">

                        </div>
                        <div class="detailed_info">
                            <p style="padding: 5px 0;border-top: 1px solid #eee; margin: 0; display: none;">详细信息</p>
                            <p>
                                <span>消费总额: <span id="xiaofei_Sum"></span></span>
<!--                                <span>打折优惠: <span class="bills_Discountamount">0.00</span></span>-->
<!--                                <span>免单金额: <span class="bills_FreeBillsPrice">0.00</span></span>-->
                                <span>抹零金额: <span class="bills_ReducedPrice">0.00</span></span>
                                <span>挂账金额: <span class="guazhang">0.00</span></span>
                            </p>
<!--                            <p>-->
<!--                                <span>抹零金额: <span class="bills_ReducedPrice">0.00</span></span>-->
<!--                                <span>挂账金额: <span class="guazhang">0.00</span></span>-->
<!--                                <span><span></span></span>-->
<!--                            </p>-->
                        </div>

                        <div class="list">
                            <div class="con1">
                                <span>应收：</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ￥<span id="yingshou_Sum"> </span>
                            </div>
                            <div class="types">
                                <!-- <div>
                                  <span class="order_type_name">
                                    <span data-no="8">现金</span>
                                  </span>
                                  <span>
                                    <input type="text" maxlength="8" class="form-control cash" value="" name=""
                                      oninput="value=value.replace(/^\D*(\d*(?:\.\d{0,2})?).*$/g,'$1')">
                                    <a href="javascript:;" class="cash_close">X</a>
                                  </span>
                                </div> -->
                            </div>
                            <div class="con1 youhui">
                                <span>优惠金额</span>
                                <input type="number" id="youhui" placeholder="请输入优惠金额" value="" min="0" step="0.01">

                            </div>
                            <div class="con1">
                                <span>找零</span>
                                <span class="change">￥ 0.00</span>

                            </div>

                            <div class="con1 youhui">
                                <span>实际金额</span>
                                <span class="change" id="shiji">￥ 0.00</span>

                            </div>



                        </div>

                        <div class="couponHint">
                            <span>优惠券</span>
                            <span class="usableCouponHint">暂无可用</span>
                        </div>


                        <div class="payTypeBox">
                            <div class="pay_type payType">
                                <div style="display: inline-block;font-size: 18px;" data-no="1384" data-name="现金">
                                    💰现金
                                </div>
                                <div style="display: inline-block;font-size: 18px;" data-no="1385" data-name="储值卡">
                                    💳储值卡
                                </div>

                                <div style="display: inline-block;font-size: 18px;" data-no="1386" data-name="银行卡">
                                    🏦银行卡
                                </div>

                                <div style="display: inline-block;font-size: 18px;" data-no="1387"  id="daijinquan" data-name="代金券">
                                    🎫代金券
                                </div>

                                <div style="display: inline-block;font-size: 18px;" data-no="1388" data-name="微信" >
                                    📱微信/支付宝
                                </div>

                                <div style="display: inline-block;font-size: 18px;" data-no="1388" data-name="微信" id="guazhang" >
                                    挂账
                                </div>

                                <div style="display: inline-block;font-size: 18px;" data-no="1388" data-name="微信" class="jiesuan">
                                    结算挂账
                                </div>


<!--                                <div data-no="1389" data-name="支付宝">-->
<!--                                    支付宝-->
<!--                                </div>-->
                            </div>
                        </div>

                        <div class="calculate">
                            <table class="table table-bordered">
                                <tbody><tr>
                                    <td>7</td>
                                    <td>8</td>
                                    <td>9</td>
                                    <td id="but7" data-prem="0205008" class="but7 settle_finish">
                                        结账完成
                                    </td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>

                                    <td class="disabled">￥ 100</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>￥ 50</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td>.</td>
                                    <td>C</td>
                                    <td>￥ 20</td>
                                </tr>
                                </tbody></table>
                        </div>

                </div>

            </div>
        </div>
    </div>

    <!--    折扣窗体-->
    <div id="zheko" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="zheko_move" class="modal-header" >
                    <div class="modal-title modal-title-left">打折优惠</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#zheko').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <table id="show-zheko-table"></table>
                </div>
                <div class="zhekou_content">
                    <div class="title">
                        <table class="table">
                            <thead>
                            <tr>
                                <td class="itemName1">选中</td>
                                <td class="itemName2" style="transform: translateX(0px);">商品名称</td>
                                <td class="itemNum2">数量</td>
                                <td class="itemAmount2" style="transform: translateX(0px);">金额</td>
                                <td class="itemzheko2">折扣</td>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div id="empty_mask2">
                        <div class="cont">
                            <table id="table2" class="table table-hover">
                                <tbody>
                                <!--                        //自动添加商品-->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="border-top">
                    <label >
                        <input type="checkbox" id="is_all" class="is_all">是否全选
                    </label>

                    <div
                    >
                        <label>
                            <input type="text" name="is" id="qb_xz" value maxlength="4" class="from-control dazhe_val" placeholder="请输入打折比例(0-1)">
                        </label>
                    </div>
                    <button id="dazhe" type="button" class="btn btn-primary">
                        <i class="bi bi-arrow-bar-up icon"></i>
                        打折
                    </button>
<!--                    <button id="chuku-submit-btn" type="button" class="btn btn-primary" style="width:100px;margin-left:345px;margin-top:-80px">-->
<!--                        <i class="bi bi-arrow-bar-up icon"></i>-->
<!--                        确定-->
<!--                    </button>-->
                    <button onclick="jQuery('#zheko').hide()"  type="button" class="btn btn-primary left-margin">
                        关闭
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--    备注窗体-->
    <div id="beizhu" class="modal fade" tabindex="-1" >
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="beizhu_move" class="modal-header" >
                    <div class="modal-title modal-title-left" >备注</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#beizhu').hide()">
                        <img src="../../images/guanbi.png" style="width: 26px;height: 26px">
                    </div>
                </div>
                <div class="modal-body">
                    <label>
                        <!-- <p>备注</p> -->
                        <textarea style="width: 100%;height:100px;font-size: 18px;padding: 10px 0;outline: none;border: 1px solid #ccc;" name=""  cols="30" rows="3" class="form-control beizhu" resize="none" placeholder="请输入备注，最多30字" onchange="this.value=this.value.substring(0,30)" onkeydown="this.value=this.value.substring(0,30)" onkeyup="this.value=this.value.substring(0,30)"></textarea>
                    </label>
                </div>
                <div class="modal-footer">
                    <button style="float: right" type="button" class="btn btn-primary beizhu_btn" onclick="jQuery('#beizhu').hide()">确定</button>
                    <!-- <button type="button" class="btn btn-default" data-dismiss="modal">取消</button> -->
                </div>
            </div>
        </div>
    </div>
    <!--    会员窗体-->
    <div id="huiyuan" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" >
                <div id="huiyuan_move" class="modal-header">
                    <div class="modal-title modal-title-left">选择会员</div>
                    <div class="modal-title modal-title-right" onclick="jQuery('#huiyuan').hide()">
                        <img src="../../images/guanbi.png">
                    </div>
                </div>
                <div class="modal-body">
                    <div class="search">
                        <input id="huiyuan_window" type="text" class="form-control search_str" maxlength="11" placeholder="手机号/卡号/姓名" onkeypress="getEnterKey();">
                    </div>
                    <div class="member-list">
                        <table id="huiyuan_table" class="table table-hover">
                            <thead>
                                <tr>
                                    <td>卡号</td>
                                    <td>姓名</td>
                                    <td>性别</td>
                                    <td>电话</td>
                                    <td>状态</td>
                                    <td>积分</td>
                                </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>
<!--                    <table id="show-huiyuan-table"></table>-->
                </div>
                <div class="modal-footer">
                    <nav aria-label="Page navigation"style="float: left">
                        <ul class="pagination" style="margin: 0">
                            <li id="last" class="disabled">
                                <a href="javascript:;" aria-label="Previous">
                                    <span aria-hidden="true">«</span>
                                </a>
                            </li>
                            <li class="active">
                                <a href="javascript:;">
                                    1
                                </a>
                            </li>
                            <li id="next" class="disabled">
                                <a href="javascript:;" aria-label="Next">
                                    <span aria-hidden="true">»</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <button type="button" class="huiyuan_footer_close" data-dismiss="modal" onclick="jQuery('#huiyuan').hide()">关闭</button>
                </div>

<!--                <div>-->
<!--                    <div class="title">-->
<!--                        <table class="table">-->
<!--                            <thead>-->
<!--                            <tr>-->
<!--                                <td class="itemName1">姓名</td>-->
<!--                                <td class="itemName2">电话</td>-->
<!--                            </tr>-->
<!--                            </thead>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                    <div id="empty_mask3">-->
<!--                        <div class="cont">-->
<!--                            <table id="table3" class="table table-hover">-->
<!--                                <tbody>-->
<!--                                &lt;!&ndash;                        //自动添加商品&ndash;&gt;-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
            </div>
        </div>
    </div>


<script>
    let datas = []
    let p_zhekou = 1
    let p_name = ""
    let p_username = ""


    $("body").on('click','#daijinquan',function (){
        console.log("进入设置高度")
        $('.youhui').css('height', '30px');
    })

    $('.youhui input').on('input', function() {
        // 获取输入的值
        var youhuiValue = parseFloat($(this).val()) || 0;

        // 获取应收金额的值
        var yingshouValue = parseFloat($('#yingshou_Sum').text()) || 0;

        // 计算新的应收金额
        var newYingshouValue = yingshouValue - youhuiValue;

        // 确保不会出现负数
        if (newYingshouValue < 0) {
            newYingshouValue = 0;
            // 可选：自动调整优惠金额
            // $(this).val(yingshouValue);
        }

        // 更新应收金额显示
        $('#shiji').text(newYingshouValue.toFixed(2));
    });


    window.onload = function() {
        tableShow();
    }

    $(document).ready(function(){
        Table_sum();
        orders_auto();
    })

    //右边菜单栏点击事件,显示出对应类型的商品
    $(".Rblock .Bmenu li").click(function () {
        //获取li下面的a链接
        var _this = $(this).children();
        //获取a链接里面的文字
        var type = _this.eq(0).text();
        console.log(type)
        var this_str = ""

        if(type == "全部"){
            for(var i=0; i<datas.length; i++){
                var num = datas[i].price.split(",")[0] * p_zhekou//商品价格*折扣
                console.log('折扣='+p_zhekou)//当前商品折扣为1
                num = Math.floor(num * 100) / 100;//该类型下的商品价格
                console.log('num='+num)
                //所要显示的商品价格
                this_str += "" +
                    "<li>" +
                    "<div class=\"img\">" +
                    "<img src=\"" + datas[i].photo + "\" alt=\"\">" +
                    "</div>" +
                    "<div class=\"product_details\">"+
                    "<div class=\"title\">\n" +
                    "" + datas[i].product_name  +
                    "</div>" +
                    "<div class=\"money\">￥<span>" + num + "</span>元</div>" +
                    "</div>"+
                    "<div class=\"none id\">" + datas[i].id + "</div>" +
                    "</li>"
            }
        }else{
            for(var i=0; i<datas.length; i++){
                if(datas[i].type == type){
                    var num = datas[i].price.split(",")[0] * p_zhekou//商品价格*折扣
                    console.log('折扣='+p_zhekou)//当前商品折扣为1
                    num = Math.floor(num * 100) / 100;//该类型下的商品价格
                    console.log('num='+num)
                    //所要显示的商品价格
                    this_str += "" +
                        "<li>" +
                        "<div class=\"img\">" +
                        "<img src=\"" + datas[i].photo + "\" alt=\"\">" +
                        "</div>" +
                        "<div class=\"product_details\">"+
                        "<div class=\"title\">\n" +
                        "" + datas[i].product_name  +
                        "</div>" +
                        "<div class=\"money\">￥<span>" + num + "</span>元</div>" +
                        "</div>"+
                        "<div class=\"none id\">" + datas[i].id + "</div>" +
                        "</li>"
                }
            }
        }



        $(".Rblock .block li").attr("style","display:none;");
        $(".Rblock .block").append(this_str);

    })
    //给选中商品添加点击样式并进行增加减少和删除的操作
    $('.Lblock #empty_mask .cont .table tbody tr').click(function (){
        //产品id
        var product_id = $(this).children().eq(0).text();
        //产品个数
        var product_count = $(this).children().eq(2).children().eq(1).text();
        //产品单价 个数乘单价(datas[i].price)
        // var product_money = $(this).children().eq(3).children().eq(0).text();
        var product_money = datas[product_id].price*product_count;
        //声明一个数组用来接收
        //  var product_arr[] = null;

        // $(this).children.addClass("menuType-active").siblings().removeClass("menuType-active");
        // console.log(product_id.text(),product_count.text(),product_money.text(),product_td_Smoney.text())
        for(var i =0; i<=$(this).length;i++){
            if (parseInt(($(this).index()+1)) == parseInt(product_id)){
                $(".index .btns.jia").click(function (){
                    parseInt(parseInt(product_count)+parseInt("1"));
                    product_money += product_money;
                })
                $(".index .btns.jian").click(function (){
                    parseInt(parseInt(product_count.text())-parseInt("1"));
                    product_money += product_money;
                })
                $(".index .btns.del_this_td").click(function (){
                    $(this).index(parseInt(parseInt(product_id)-parseInt("1"))).remove();
                })
            }
        }
    })

    $("body").on('click','.Product_details_Ok',function(){
        //单点一份的1
        var num = $('.product_details_count input').val();
        //新增商品的序号
        var product_now_id = parseInt($(".index .Lblock #empty_mask .cont .table tbody tr").length+parseInt("1"));
        //获取添加商品链接的id
        var product_id = $("#product_details_id_input").val();
        console.log(product_id);
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                //所要显示的商品价格
                this_str += "" +
                    "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                    "<td class=\"itemOrderNo\">" + product_now_id+ "</td>" +
                    "<td class=\"itemName\">" + datas[i].product_name + "</td>"+
                    "<td class=\"itemNum\">" +
                    "<span class=\"count\">" + num + "</span>"+
                    "/"+
                    "<span class=\"unit\">" + datas[i].unit + "</span>"+
                    "</td>"+
                    "<td class=\"itemAmount\">" +
                    "￥"+
                    "<span class=\"price\">" + $('.product_details_price input').val() + "</span>"+
                    "</td>"+
                    "<td class=\"itemid\" style='visibility: hidden;width: 0px;margin: 0;padding: 0'>" +
                    "<span class=\"id\">" + datas[i].id + "</span>"+
                    "</td>"+
                    "</tr>"
            }
        }
        $(".Lblock #empty_mask .table tbody").append(this_str);
        Table_sum();
        jQuery('#Product_detail').hide()
        jQuery('.jiezhang_mask').hide()
    });



    $("body").on('click','#huiyuan_table tbody tr',function(){
        //单点一份的1
        var name = $(this).children().eq(1).text();
        var username = $(this).children().eq(0).text();
        p_name = name
        p_username = username
        console.log(name)
        jQuery('#huiyuan').hide();
        var this_str = "<p>" +
            "           <span>会员:</span>" +
            "           <span class=\"member_name\" title=\"" + name + "\">" + name + "</span>" +
            "           <span class=\"member_username_title\">会员账号:</span>" +
            "           <span class=\"member_username\" title=\"" + username + "\">" + username + "</span>" +
            "           </p>"
        $(".memeber_info p").remove()
        $(".memeber_info").append(this_str)
        $(".member_username_title").css('margin-left','70px')
        $(".memeber_info").css('display','flex')
    });


    function ondblclick_f(obj){
        $(obj).remove();
        Table_sum();
    }

    $("body").on('click','.success',function(){
        //单点一份的1
        console.log('dd')
        $('.success').css('background-color', 'rgba(245,228,163,0.94)');
        $(this).css('background-color', '#ebe9e9');
    });

    $("body").on('click','#jia',function(){
        //单点一份的1
        console.log('jia')

        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_count = this_count * 1 + 1 * 1
                this_money = this_money * 1 + danjia * 1
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
            }
        });
        Table_sum();
    });

    $("body").on('click','#jian',function(){
        //单点一份的1
        console.log('jian')
        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_count = this_count * 1 - 1 * 1
                this_money = this_money * 1 - danjia * 1
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
                if(this_count < 1){
                    $(this).remove();
                }
            }
        });
        Table_sum();
    });

    $("body").on('click','#is_zengsong',function(){
        console.log()
        $("#table tbody tr").each(function(){
            var a = $(this).css('background-color');
            if(a == 'rgb(249, 249, 249)'){
                console.log('选中')
                var count = $(this).children().eq(2).children().eq(0);
                var this_count = $(this).children().eq(2).children().eq(0).text();
                var money = $(this).children().eq(3);
                var this_money = $(this).children().eq(3).text();
                this_money = this_money.replace("￥","")
                console.log(count)
                console.log(this_count)
                console.log(money)
                console.log(this_money)
                var danjia = this_money / this_count
                this_money = 0
                console.log(this_count)
                console.log(this_money)
                count.text(this_count)
                money.text("￥" + this_money)
                // if(this_count < 1){
                //     $(this).remove();
                // }
            }
        });
        Table_sum();
    });

    //--------------------------------


    // 作废按钮点击后
    $(".but2").click(function () {
        console.log("delete")
        $(".Lblock #empty_mask .cont .table tbody tr").remove();
        Table_sum();
        location.replace(location.href);
    })
    //鼠标经过结账按钮
    var ceshiText=""
    $(".but7").mouseenter(function (e) {
        ceshiText="本次消费"+ $("#yingshou_Sum").text()+"元"
        console.log(ceshiText)
        handleSpeak(ceshiText)
    });

    const synth = window.speechSynthesis;
    const msg = new SpeechSynthesisUtterance();
        //语音播报的函数
    function handleSpeak(text){
        msg.text = text;
        msg.lang = "zh-CN";
        msg.volume = 1;
        msg.rate = 2;
        msg.pitch = 0;
        synth.speak(msg);
    }
        //语音停止
    function handleStop(e){
        msg.text =e;
        msg.lang = "zh-CN";
        synth.cancel(msg);
    }
    //结账按钮点击后
    $(".but7").click(function () {

        console.log("add")
        var pro_list = []
        var pro_num = $("#danhao").val();
        var member_name=p_name
        var member_username=p_username

        $("#table1 tbody tr").each(function () {
            var id = $(this).children().eq(0).text();
            var jine = $(this).children(".itemAmount1").children().eq(0).text();
            jine = jine.replace("￥","")
            var shul= $(this).children(".itemNum1").children().eq(0).text();
            var zhek= $(this).children(".itemzheko").children().eq(0).text();

            console.log(jine)
            console.log(shul)
            console.log(zhek)
            for(var i=0; i<datas.length;i++){
                if(datas[i].product_name == id){
                    pro_list.push({
                        member_name:member_name,
                        member_username:member_username,
                        cplx:datas[i].type,
                        cpmc:datas[i].product_name,
                        dw:datas[i].unit,
                        dj:datas[i].price,
                        dzbl:zhek,
                        // zhdj:zhehou / num,
                        zhdj:jine*zhek/shul,
                        // zhje:zhehou,
                        zhje:jine*zhek*shul/shul,
                        gs:shul
                    })
                }

            }
        })

        jQuery("#jiezhang").hide()
        jQuery(".jiezhang_mask").hide()
        $(".Lblock #empty_mask .cont table tr").remove()
        console.log(pro_list)
        console.log(pro_num)
        var yingshouValue = parseFloat($('#yingshou_Sum').text()) || 0;
        var shijiValue = parseFloat($('#shiji').text()) || 0;
        var youhuiValue = parseFloat($('#youhui').val()) || 0;



        $.ajax({
            type: 'post',
            url: '/order_panel/add',
            timeout: 5000,
            data: {
                pro_list: JSON.stringify(pro_list),
                pro_num: pro_num,
                member_name:member_name,
                member_username,
                youhui: p_zhekou,
                yhje:youhuiValue,
                ssje:shijiValue,
                xfje:yingshouValue
            },
            success: function(res){
                let result = JSON.parse(res)
                alert(result.msg)
                tableShow();
                orders_auto();
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
        location.replace(location.href);
    })

    document.getElementById("but3").onclick = function() {
        var num = $('.Lblock #empty_mask .cont .table tbody tr').length;
        if (num <1){
            alert('购物车为空')
        }else{
            $("#table1 tbody tr").remove();
            var pro_list = []
            var pro_num = $("#danhao").val();


            var this_str1 = ""
            var _number = 0;
            var _money = 0;
            $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
                var id = $(this).children(".itemid").eq(0).text();

                var num = $(this).children(".itemNum").children().eq(0).text();

                var zhehou = $(this).children(".itemAmount").children().eq(1).text();

                var money = $(this).children().eq(3).text();


                for(var i=0; i<datas.length;i++){

                    if(datas[i].id == id){

                        console.log(datas[i].id)
                        this_str1 += "" +
                            "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                            "<td class=\"itemName1\">" + datas[i].product_name + "</td>"+
                            "<td class=\"itemNum1\">" +
                            "<span class=\"count\">" + num + "</span>"+
                            "/"+
                            "<span class=\"unit\">" + datas[i].unit + "</span>"+
                            "</td>"+
                            "<td class=\"itemAmount1\">" +
                            "<span class=\"price\">" + money + "</span>"+
                            "</td>"+
                            "<td class=\"itemzheko\"><div class=\"aa\">1</div></td>"+
                            "</tr>"
                        console.log(this_str1)
                    }

                }
            })
            $("#table1 tbody").append(this_str1);
            console.log(pro_list)
            console.log(pro_num)

            if(cachedTableNumber != ''){
                uptableTable(pro_num,cachedTableNumber)
            }
            if(pro_num == ''){
                alert("未填写订单号")
                return;
            }
            console.log(pro_list.length)
            if(datas.length == 0){
                alert("未选择商品")
                return;
            }
            $(".hover").click(function (){
                $(".hover").removeClass("active")
                $(".hover").addClass("active")
            })
            jQuery(".jiezhang_mask").show()
            jQuery('#jiezhang').show();
            $("body").addClass("mask")
            huiyuan_sum();
        }

        var danhao = $("#danhao").val().slice(-4);

        // 找到第一个非零数字的起始位置
        var startIndex = 0;
        while (startIndex < danhao.length && danhao[startIndex] === '0') {
            startIndex++;
        }

        // 提取有效数字部分
        var validNumber = startIndex < danhao.length ? danhao.substring(startIndex) : '0';
        var finalCount = parseInt(validNumber) - 1;

        // 更新人数显示
        $("h3.renshu").text("累计结账：" + finalCount + "人");



    };


    function uptableTable(pro_num,cachedTableNumber) {
        $.ajax({
            type: 'post',
            url: '/order_table/uptabletables',
            async: false,
            timeout: 5000,
            data: {
                dh: pro_num,
                zh:cachedTableNumber
            },
            success: function(res) {
                console.log("筛选请求结果", res);
            },
            error: function(res) {
                if (res.status == "timeout") {

                } else {

                }
                // 错误时显示提示
                $('.tables-grid').html('<div class="no-data">数据加载失败</div>');
            }
        });
    }

    document.getElementById("but4").onclick = function() {
        console.log("add")
        $("#table2 tbody tr").remove();
        var pro_list = []
        var pro_num = $("#danhao").val();
        var this_str1 = ""
        $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
            var id = $(this).children(".itemid").eq(0).text();
            var num = $(this).children(".itemNum").children().eq(0).text();
            var zhehou = $(this).children(".itemAmount").children().eq(1).text();
            var money = $(this).children().eq(3).text();
            console.log(id)
            console.log(num)
            console.log(zhehou)
            console.log(datas)
            console.log(id)
            for(var i=0; i<datas.length;i++){
                if(datas[i].id == id){
                    console.log(datas[i].id)
                    this_str1 += "" +
                        "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                        "<td class=\"itemxuanzhe\"><input class=\"itemxuanzhe1\" type=\"checkbox\"></td>"+
                        "<td class=\"itemName2\">" + datas[i].product_name + "</td>"+
                        "<td class=\"itemNum2\">" +
                        "<span class=\"count\">" + num + "</span>"+
                        "/"+
                        "<span class=\"unit\">" + datas[i].unit + "</span>"+
                        "</td>"+
                        "<td class=\"itemAmount2\">" +
                        "<span class=\"price\">" + money + "</span>"+
                        "</td>"+
                        "<td class=\"itemzheko\">1</td>"+
                        "<td class=\"itemid\" style='visibility: hidden;width: 10px;margin: 0;padding: 0'>" +
                        "<span class=\"id\">" + datas[i].id + "</span>"+
                        "</td>"+
                        "</tr>"

                    console.log(this_str1)
                }
            }
        })
        $("#table2 tbody").append(this_str1);
        console.log(pro_list)
        console.log(pro_num)
        if(pro_num == ''){
            alert("未填写订单号")
            return;
        }
        console.log(pro_list.length)
        if(datas.length == 0){
            alert("未选择商品")
            return;
        }
        $(".hover").click(function (){
            $(".hover").removeClass("active")
            $(".hover").addClass("active")
        })
        jQuery('#zheko').show();
        huiyuan_sum();
    };

    document.getElementById("but5").onclick = function() {
        var _money = 0;
        $("#table2 tbody tr").each(function () {
            var num = $(this).children(".itemNum2").children().eq(0).text();
            var this_money = $(this).children(".itemAmount2").children().eq(0).text();
            var zheko = $(this).children(".itemzheko").eq(0).text();
            _money =0;
        })
        console.log(_money)
        $("#yingshou_Sum").html(_money.toFixed(2));

    };

    document.getElementById("but6").onclick = function() {
        jQuery('#beizhu').show();
        huiyuan_sum();
    };

    document.getElementById("dazhe").onclick = function() {
        var xiabiao_arr = []
        var bianliang = 1
        var zheko_zhi = $("#qb_xz").val();
        $("#table2 tbody tr").each(function () {
            var this_check = $(this).children(".itemxuanzhe").children().is(':checked');
            console.log(this_check)
            if (this_check == true) {
                console.log('判断成功')
                console.log($(this).children(".itemzheko").eq(0).text())
                $(this).children(".itemzheko").eq(0).text(zheko_zhi);
                xiabiao_arr.push(bianliang)
                // $("#table1 tbody tr").children(".itemzheko").children().eq(0).text(zheko_zhi);
            }
            bianliang = bianliang + 1
        })
        bianliang = 1
        $("#table1 tbody tr").each(function () {
            if (xiabiao_arr.indexOf(bianliang) != -1) {
                console.log('判断成功')
                $(this).children(".itemzheko").children().eq(0).text(zheko_zhi);
            }
            bianliang = bianliang + 1
        })

        jQuery('#zheko').hide()
        huiyuan_sum();
    };

    $("#is_all").change(function() {
        var this_check = $("#is_all").is(':checked')
        console.log(this_check)
        $(".itemxuanzhe1").attr("checked",this_check)
        // if (this_check = true){
        //     $(".itemxuanzhe1").attr("checked",this_check)
        // }else if (this_check = false){
        //     $(".itemxuanzhe1").attr("checked",this_check)
        // }
    });

    document.getElementById("huiyuan_xz").onclick = function() {
        jQuery('#huiyuan').show();
        $.ajax({
            type: 'post',
            url: '/order_panel/select_huiyuan_list',
            async:false,
            data:{
                this_head:"",
            },
            timeout: 5000,
            success: function(res){
                let result = JSON.parse(res)
                console.log('会员列表')
                console.log(result.datas)
                var this_str = ""
                for(var i=0; i<result.datas.length; i++){
                    this_str = this_str + "<tr>" +
                        "<td>" + result.datas[i].username + "</td>" +
                        "<td>" + result.datas[i].name + "</td>" +
                        "<td>" + result.datas[i].gender + "</td>" +
                        "<td>" + result.datas[i].phone + "</td>" +
                        "<td>" + result.datas[i].state + "</td>" +
                        "<td>" + result.datas[i].points + "</td>" +
                        "</tr>"
                }
                $("#huiyuan_table tbody tr").remove();
                $("#huiyuan_table tbody").append(this_str);

            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
    };

    function getEnterKey(){
        if(event.keyCode==13){
            var keyword = $('#huiyuan_window').val()
            $.ajax({
                type: 'post',
                url: '/order_panel/select_huiyuan_list',
                async:false,
                data:{
                    this_head:keyword,
                },
                timeout: 5000,
                success: function(res){
                    let result = JSON.parse(res)
                    console.log('会员列表')
                    console.log(result.datas)
                    var this_str = ""
                    for(var i = 0; i < result.datas.length; i++){
                        this_str = this_str + "<tr>" +
                            "<td>" + result.datas[i].username + "</td>" +
                            "<td>" + result.datas[i].name + "</td>" +
                            "<td>" + result.datas[i].gender + "</td>" +
                            "<td>" + result.datas[i].phone + "</td>" +
                            "<td>" + result.datas[i].state + "</td>" +
                            "</tr>"
                    }
                    $("#huiyuan_table tbody tr").remove();
                    $("#huiyuan_table tbody").append(this_str);

                },
                error: function(res){
                    if(res.status == "timeout"){
                        alert("网络超时，请稍后再试")
                    }else{
                        alert("网络错误，请稍后再试")
                    }
                }
            });
        }
    }

    //改过了--------------
    //合计商品数量和价格
    //完成了
    function Table_sum(){

        var _number = 0;
        var _money = 0;
        $(".Lblock #empty_mask .cont .table tbody tr").each(function () {
            var number = $(this).children().eq(2).children().eq(0).text();
            var money = $(this).children().eq(3).text();
            money = money.replace("￥","")
            console.log(number)
            console.log(money)
            console.log(this)
            console.log($(this).children().eq(3).children(".itemAmount").text())
            _number += (number * 1);
            _money += (money * 1);

        })
        console.log(_number)
        console.log(_money)
        // console.log('当前money='+_money);
        $(".Lblock .end").children().eq(0).children(".count").text(_number);
        $(".Lblock .end").children().eq(1).children().children(".price_total").text(_money);

    }

    function huiyuan_sum(){

        var _money = 0;
        $("#table1 tbody tr").each(function () {
            var num = $(this).children(".itemNum1").children().eq(0).text();
            var this_money = $(this).children(".itemAmount1").children().eq(0).text();
            this_money = this_money.replace("￥","")
            var zheko = $(this).children(".itemzheko").children().eq(0).text();

            _money = _money + (this_money * zheko);
        })
        console.log(_money)
        $("#xiaofei_Sum").html(_money.toFixed(2))
        $("#yingshou_Sum").html(_money.toFixed(2))


    }

    function tableShow(){
        $.ajax({
            type: 'post',
            url: '/order_panel/select',
            async:false,
            timeout: 5000,
            success: function(res){
                //转成json
                let result = JSON.parse(res)
                console.log(result)
                datas = result.datas
                console.log(datas)
                let users = result.users
                console.log(users)
                if(users.usertype == '客户'){
                    $.ajax({
                        type: 'post',
                        url: '/order_panel/select_discount',
                        async:false,
                        timeout: 5000,
                        success: function(res){
                            let result = JSON.parse(res)
                            console.log('客户金额和等级列表')
                            console.log(result)
                            var zhekou = 1
                            var zhekou_list = result.dengji
                            var xiaofei = result.xiaoji_sum
                            if(xiaofei == null){
                                xiaofei = 0
                            }
                            for(var i=0; i<zhekou_list.length; i++){
                                console.log("门槛：" + zhekou_list[i].menkan * 1)
                                console.log("消费金额：" + xiaofei * 1)
                                if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
                                    zhekou = zhekou_list[i].bili
                                }
                            }
                            console.log(zhekou)
                            p_zhekou = zhekou
                            var this_str = ""
                            console.log(datas)
                            for(var i=0; i<datas.length; i++){
                                var num = product_Startprice * zhekou
                                num = Math.floor(num * 100) / 100;
                                this_str = this_str + "<li><div class=\"img\"><img src=\"{{datas[i].photo}}\" alt=\"\"></div><div class=\"title\">\n" +
                                    "                    " + datas[i].product_name  +
                                    "                </div>" +
                                    "                <div class=\"money\">￥<span>" + num + "</span>元</div>" +
                                    "                <div class=\"none id\">" + datas[i].id + "</div>" +
                                    "            </li>"

                            }

                            $(".Rblock .block li").remove();
                            $(".Rblock .block").append(this_str);

                            $(".Lblock .table .cont li").remove();
                            $(".table .cont").attr("style", "display:none");
                            $("#empty_mask").attr("style", "display:block");
                            Table_sum();

                        },
                        error: function(res){
                            if(res.status == "timeout"){
                                alert("网络超时，请稍后再试")
                            }else{
                                alert("网络错误，请稍后再试")
                            }
                        }
                    });
                }
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });

    }


    // function tableLitterShow(){
    //     // 先清空内容
    //     $(".Rblock .block").empty();
    //
    //     var searchValue = $(".search-input").val().trim();
    //     console.log("searchValue", searchValue);
    //
    //     // 显示加载中状态
    //     $(".Rblock .block").html('<div class="loading">加载中...</div>');
    //
    //     // 使用异步请求
    //     $.ajax({
    //         type: 'post',
    //         url: '/order_panel/getlist',
    //         data: {
    //             name: searchValue
    //         },
    //         async: true,
    //         timeout: 5000,
    //         success: function(res){
    //             // 清空加载状态
    //             $(".Rblock .block").empty();
    //
    //             let result = JSON.parse(res);
    //             console.log(result);
    //             datas = result.datas;
    //             let users = result.users;
    //             console.log(users);
    //
    //             if(users.usertype == '客户'){
    //                 $.ajax({
    //                     type: 'post',
    //                     url: '/order_panel/select_discount',
    //                     async: true,
    //                     timeout: 5000,
    //                     success: function(res){
    //                         let result = JSON.parse(res);
    //                         console.log('客户金额和等级列表');
    //                         console.log(result);
    //
    //                         var zhekou = 1;
    //                         var zhekou_list = result.dengji;
    //                         var xiaofei = result.xiaoji_sum;
    //
    //                         if(xiaofei == null){
    //                             xiaofei = 0;
    //                         }
    //
    //                         for(var i=0; i<zhekou_list.length; i++){
    //                             console.log("门槛：" + zhekou_list[i].menkan * 1);
    //                             console.log("消费金额：" + xiaofei * 1);
    //                             if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
    //                                 zhekou = zhekou_list[i].bili;
    //                             }
    //                         }
    //
    //                         console.log(zhekou);
    //                         p_zhekou = zhekou;
    //                         var this_str = "";
    //                         console.log(datas);
    //
    //                         for(var i=0; i<datas.length; i++){
    //                             // 修复金额计算 - 确保使用正确的价格字段
    //                             var price = parseFloat(datas[i].price) || parseFloat(datas[i].product_price) || 0;
    //                             var num = price * zhekou;
    //                             num = Math.floor(num * 100) / 100;
    //
    //                             // 确保不是NaN
    //                             if (isNaN(num)) {
    //                                 console.error("价格计算错误:", datas[i]);
    //                                 num = 0;
    //                             }
    //
    //                         //     this_str += `<li>
    //                         //     <div class="img"><img src="${datas[i].photo || ''}" alt=""></div>
    //                         //     <div class="title">${datas[i].product_name}</div>
    //                         //     <div class="money">￥<span>${num.toFixed(2)}</span>元</div>
    //                         //     <div class="none id">${datas[i].id}</div>
    //                         // </li>`;
    //                             this_str = this_str + "<li><div class=\"img\"><img src=\"{{datas[i].photo}}\" alt=\"\"></div><div class=\"title\">\n" +
    //                                 "                    " + datas[i].product_name  +
    //                                 "                </div>" +
    //                                 "                <div class=\"money\">￥<span>" + num + "</span>元</div>" +
    //                                 "                <div class=\"none id\">" + datas[i].id + "</div>" +
    //                                 "            </li>"
    //                         }
    //
    //                         // 清空并添加新内容
    //                         $(".Rblock .block").html(this_str);
    //
    //                         $(".Lblock .table .cont li").remove();
    //                         $(".table .cont").attr("style", "display:none");
    //                         $("#empty_mask").attr("style", "display:block");
    //                         Table_sum();
    //                     },
    //                     error: function(res){
    //                         if(res.status == "timeout"){
    //                             alert("网络超时，请稍后再试");
    //                         }else{
    //                             alert("网络错误，请稍后再试");
    //                         }
    //                     }
    //                 });
    //             } else {
    //                 // 处理非客户用户的情况
    //                 var this_str = "";
    //                 for(var i=0; i<datas.length; i++){
    //                     // 修复金额计算 - 确保使用正确的价格字段
    //                     var price = parseFloat(datas[i].price) || parseFloat(datas[i].product_price) || 0;
    //                     var num = price;
    //                     num = Math.floor(num * 100) / 100;
    //
    //                     // 确保不是NaN
    //                     if (isNaN(num)) {
    //                         console.error("价格计算错误:", datas[i]);
    //                         num = 0;
    //                     }
    //
    //                     this_str += `<li>
    //                     <div class="img"><img src="${datas[i].photo || ''}" alt=""></div>
    //                     <div class="title">${datas[i].product_name}</div>
    //                     <div class="money">￥<span>${num.toFixed(2)}</span>元</div>
    //                     <div class="none id">${datas[i].id}</div>
    //                 </li>`;
    //                 }
    //
    //                 $(".Rblock .block").html(this_str);
    //                 $(".Lblock .table .cont li").remove();
    //                 $(".table .cont").attr("style", "display:none");
    //                 $("#empty_mask").attr("style", "display:block");
    //                 Table_sum();
    //             }
    //         },
    //         error: function(res){
    //             // 清空加载状态
    //             $(".Rblock .block").empty();
    //
    //             if(res.status == "timeout"){
    //                 alert("网络超时，请稍后再试");
    //             }else{
    //                 alert("网络错误，请稍后再试");
    //             }
    //         }
    //     });
    // }
    function tableLitterShow(){
        // 先清空内容
        $(".Rblock .block").empty();

        var searchValue = $(".search-input").val().trim();
        console.log("searchValue", searchValue);

        // 显示加载中状态
        $(".Rblock .block").html('<div class="loading">加载中...</div>');

        // 改为同步请求
        $.ajax({
            type: 'post',
            url: '/order_panel/getlist',
            data: {
                name: searchValue
            },
            async: false, // 改为同步
            timeout: 5000,
            success: function(res){
                // 清空加载状态
                $(".Rblock .block").empty();

                let result = JSON.parse(res);
                console.log(result);
                datas = result.datas;
                let users = result.users;
                console.log(users);

                if(users.usertype == '客户'){
                    $.ajax({
                        type: 'post',
                        url: '/order_panel/select_discount',
                        async: false, // 改为同步
                        timeout: 5000,
                        success: function(res){
                            let result = JSON.parse(res);
                            console.log('客户金额和等级列表');
                            console.log(result);

                            var zhekou = 1;
                            var zhekou_list = result.dengji;
                            var xiaofei = result.xiaoji_sum;

                            if(xiaofei == null){
                                xiaofei = 0;
                            }

                            for(var i=0; i<zhekou_list.length; i++){
                                console.log("门槛：" + zhekou_list[i].menkan * 1);
                                console.log("消费金额：" + xiaofei * 1);
                                if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
                                    zhekou = zhekou_list[i].bili;
                                }
                            }

                            console.log(zhekou);
                            p_zhekou = zhekou;
                            var this_str = "";
                            console.log(datas);

                            for(var i=0; i<datas.length; i++){
                                // 修复金额计算 - 确保使用正确的价格字段
                                var price = parseFloat(datas[i].price) || parseFloat(datas[i].product_price) || 0;
                                var num = price * zhekou;
                                num = Math.floor(num * 100) / 100;

                                // 确保不是NaN
                                if (isNaN(num)) {
                                    console.error("价格计算错误:", datas[i]);
                                    num = 0;
                                }

                                // 使用与 tableShow 相同的字符串拼接方式
                                this_str = this_str + "<li><div class=\"img\"><img src=\"" + (datas[i].photo || '') + "\" alt=\"\"></div><div class=\"title\">\n" +
                                    "                    " + datas[i].product_name  +
                                    "                </div>" +
                                    "                <div class=\"money\">￥<span>" + num.toFixed(2) + "</span>元</div>" +
                                    "                <div class=\"none id\">" + datas[i].id + "</div>" +
                                    "            </li>"
                            }

                            // 使用与 tableShow 相同的 DOM 操作方式
                            $(".Rblock .block li").remove();
                            $(".Rblock .block").append(this_str);

                            $(".Lblock .table .cont li").remove();
                            $(".table .cont").attr("style", "display:none");
                            $("#empty_mask").attr("style", "display:block");
                            Table_sum();
                        },
                        error: function(res){
                            if(res.status == "timeout"){
                                alert("网络超时，请稍后再试");
                            }else{
                                alert("网络错误，请稍后再试");
                            }
                        }
                    });
                } else {
                    // 处理非客户用户的情况
                    var this_str = "";
                    for(var i=0; i<datas.length; i++){
                        // 修复金额计算 - 确保使用正确的价格字段
                        var price = parseFloat(datas[i].price) || parseFloat(datas[i].product_price) || 0;
                        var num = price;
                        num = Math.floor(num * 100) / 100;

                        // 确保不是NaN
                        if (isNaN(num)) {
                            console.error("价格计算错误:", datas[i]);
                            num = 0;
                        }

                        // 使用与 tableShow 相同的字符串拼接方式
                        this_str = this_str + "<li><div class=\"img\"><img src=\"" + (datas[i].photo || '') + "\" alt=\"\"></div><div class=\"title\">\n" +
                            "                    " + datas[i].product_name  +
                            "                </div>" +
                            "                <div class=\"money\">￥<span>" + num.toFixed(2) + "</span>元</div>" +
                            "                <div class=\"none id\">" + datas[i].id + "</div>" +
                            "            </li>"
                    }

                    // 使用与 tableShow 相同的 DOM 操作方式
                    $(".Rblock .block li").remove();
                    $(".Rblock .block").append(this_str);

                    $(".Lblock .table .cont li").remove();
                    $(".table .cont").attr("style", "display:none");
                    $("#empty_mask").attr("style", "display:block");
                    Table_sum();
                }
            },
            error: function(res){
                // 清空加载状态
                $(".Rblock .block").empty();

                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试");
                }else{
                    alert("网络错误，请稍后再试");
                }
            }
        });
    }
    function member_select_tableShow(){
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
        $.ajax({
            type: 'post',
            url: '/order_panel/select_huiyuan_list',
            async:false,
            timeout: 5000,
            success: function(res){
                //转成json
                let result = JSON.parse(res)
                console.log(result)
                datas = result.datas
                console.log(datas)
                let users = result.users
                console.log(users)
                if(users.usertype == '客户'){
                    $.ajax({
                        type: 'post',
                        url: '/order_panel/select_discount',
                        async:false,
                        timeout: 5000,
                        success: function(res){
                            let result = JSON.parse(res)
                            console.log('客户金额和等级列表')
                            console.log(result)
                            var zhekou = 1
                            var zhekou_list = result.dengji
                            var xiaofei = result.xiaoji_sum
                            if(xiaofei == null){
                                xiaofei = 0
                            }
                            for(var i=0; i<zhekou_list.length; i++){
                                console.log("门槛：" + zhekou_list[i].menkan * 1)
                                console.log("消费金额：" + xiaofei * 1)
                                if(zhekou_list[i].menkan * 1 <= xiaofei * 1){
                                    zhekou = zhekou_list[i].bili
                                }
                            }
                            console.log(zhekou)
                            p_zhekou = zhekou
                            var this_str = ""
                            console.log(datas)
                            for(var i=0; i<datas.length; i++){
                                var num = datas[i].price * zhekou
                                num = Math.floor(num * 100) / 100;
                                this_str = this_str + "<tr><td>" + " + datas[i].product_name"+
                                    "                </div>" +
                                    "                <div class=\"money\">￥<span>" + num + "</span>元</div>" +
                                    "                <div class=\"none id\">" + datas[i].id + "</div>" +
                                    "            </tr>"

                            }

                            $(".Rblock .block li").remove();
                            $(".Rblock .block").append(this_str);

                            $(".Lblock .table .cont li").remove();
                            $(".table .cont").attr("style", "display:none");
                            $("#empty_mask").attr("style", "display:block");
                            Table_sum();

                        },
                        error: function(res){
                            if(res.status == "timeout"){
                                alert("网络超时，请稍后再试")
                            }else{
                                alert("网络错误，请稍后再试")
                            }
                        }
                    });
                }
            },
            error: function(res){
                if(res.status == "timeout"){
                    alert("网络超时，请稍后再试")
                }else{
                    alert("网络错误，请稍后再试")
                }
            }
        });
    }

    // 菜单栏点击效果
    $(function(){
        $(".Rblock .Bmenu .hover .menuType").click(function(){
            $(this).addClass("menu-a").parent().siblings().children().removeClass("menu-a");
        });
    });

    // 结账窗口移动
    var jiezhang = document.querySelector('#jiezhang');
    var jiezhang_move = document.querySelector('#jiezhang_move');
    jiezhang_move.addEventListener('mousedown',function(e){
        var x = e.pageX - jiezhang.offsetLeft;
        var y = e.pageY - jiezhang.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            jiezhang.style.left = e.pageX - x + "px";
            jiezhang.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 折扣窗口移动
    var zheko = document.querySelector('#zheko');
    var zheko_move = document.querySelector('#zheko_move');
    zheko_move.addEventListener('mousedown',function(e){
        var x = e.pageX - zheko.offsetLeft;
        var y = e.pageY - zheko.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            zheko.style.left = e.pageX - x + "px";
            zheko.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 备注窗口移动
    var beizhu = document.querySelector('#beizhu');
    var beizhu_move = document.querySelector('#beizhu_move');
    beizhu_move.addEventListener('mousedown',function(e){
        var x = e.pageX - beizhu.offsetLeft;
        var y = e.pageY - beizhu.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            beizhu.style.left = e.pageX - x + "px";
            beizhu.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 会员窗口移动
    var huiyuan = document.querySelector('#huiyuan');
    var huiyuan_move = document.querySelector('#huiyuan_move');
    huiyuan_move.addEventListener('mousedown',function(e){
        var x = e.pageX - huiyuan.offsetLeft;
        var y = e.pageY - huiyuan.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            huiyuan.style.left = e.pageX - x + "px";
            huiyuan.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 商品详情移动
    var Product_detail = document.querySelector('#Product_detail');
    var Product_detail = document.querySelector('#Product_detail');
    Product_detail_move.addEventListener('mousedown',function(e){
        var x = e.pageX - Product_detail.offsetLeft;
        var y = e.pageY - Product_detail.offsetTop;
        document.addEventListener('mousemove',move)
        function move(e){
            Product_detail.style.left = e.pageX - x + "px";
            Product_detail.style.top = e.pageY - y + "px";
        }
        document.addEventListener('mouseup',function(){
            document.removeEventListener('mousemove',move)
        })
    })
    // 自动获取订单号
    function orders_auto(){
            var myDate = new Date();
            var year = myDate.getFullYear();
            var month = myDate.getMonth()+1;
            var day = myDate.getDate();
            var fixedvalue = 1;
            if (month < 10){
                month = '0' + month;
            }
            if(day <10){
                day = '0' + day;
            }
            if(fixedvalue>=1000 && fixedvalue<=9999){
                fixedvalue = fixedvalue;
            }else if(fixedvalue>=100 && fixedvalue<=999){
                fixedvalue = '0'+ fixedvalue;
            }else if(fixedvalue>=10 && fixedvalue<=99){
                fixedvalue = '0'+'0'+fixedvalue
            }else if(fixedvalue>=1 && fixedvalue<=9){
                fixedvalue = '0'+'0'+'0'+fixedvalue
            }
            orders_value = year.toString()+month.toString()+day.toString()+fixedvalue.toString()
            $.ajax({
                type: 'post',
                url: '/order_panel/select_order_number',
                data: {
                    this_head: orders_value,
                },
                async:false,
                timeout: 5000,
                success: function(res){
                    let result = JSON.parse(res)
                    if (result.datas.length>0){
                        for (var i = 0 ;i<result.datas.length;i++){
                            if( orders_value+""<=  result.datas[i].ddh){
                                fixedvalue += 1
                                orders_value = result.datas[i].ddh * 1 + 1;
                                console.log(orders_value)
                            }
                        }

                    }
                },
                error: function(res){
                    if(res.status == "timeout"){
                        alert("网络超时，请稍后再试")
                    }else{
                        alert("网络错误，请稍后再试")
                    }
                }
            });

        if (!$('#danhao').val()) {
            $('#danhao').val(orders_value);
        }
        //     $('#danhao').val(orders_value);

        var danhao = $("#danhao").val().slice(-4);

        // 找到第一个非零数字的起始位置
        var startIndex = 0;
        while (startIndex < danhao.length && danhao[startIndex] === '0') {
            startIndex++;
        }

        // 提取有效数字部分
        var validNumber = startIndex < danhao.length ? danhao.substring(startIndex) : '0';

        var finalCount = parseInt(validNumber) - 1;
        // 更新人数显示
        $("h3.renshu").text("累计结账：" + finalCount + "人");
    }

    // 点击商品弹出详情页
    $("body").on('click','.Rblock .block li',function(){
    // $('.Rblock .block li').click(function () {

        jQuery("#Product_detail").show();
        jQuery(".jiezhang_mask").show();
console.log("被惦记")
        //单点一份的1
        var num = 1;
        //新增商品的序号
        var product_now_id = parseInt($(".index .Lblock #empty_mask .cont .table tbody tr").length+parseInt("1"));
        //获取添加商品链接的id
        var product_id = $(this).children(".id").text();
        console.log(product_id);
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                this_str = this_str + "<img src=\"" + datas[i].photo + "\" alt=\"\">"
                $(".modal-content-l img").remove();
                $(".modal-content-l").append(this_str);
                $(".modal-content-r-header").text(datas[i].product_name)
                $(".product_details_type input").val(datas[i].type)
                $(".product_details_count input").val(num)

                var this_guige = datas[i].specifications.split(",")
                var this_str = ""
                for(var j=0; j<this_guige.length; j++){
                    this_str = this_str + "<option value='"+ j +"'>" + this_guige[j] + "</option>"
                }
                $(".product_details_specification select option").remove()
                $(".product_details_specification select").append(this_str)
                // $(".product_details_specification select").val(datas[i].specifications)
                var this_flavor = datas[i].practice.split(",")
                var this_str = ""
                for(var f=0; f<this_flavor.length; f++){
                    this_str = this_str + "<option value='"+ f +"'>" + this_flavor[f] + "</option>"
                }
                $(".product_details_flavor select option").remove()
                $(".product_details_flavor select").append(this_str)
                // $(".product_details_flavor select").val(datas[i].practice)
                var this_arr = datas[i].price.split(",")
                $(".product_details_price input").val(this_arr[0])
                $(".product_details_content textarea").val(datas[i].xiangqing)
                $(".product_details_id input").val(datas[i].id)
            }
        }
        document.getElementById("xiangqing_Price").setAttribute('readonly',true);
        document.getElementById("xiangqing_type").setAttribute('readonly',true);
    })


    $("body").on('change','.product_details_specification',function(){
        // $('.Rblock .block li').click(function () {

        //获取添加商品链接的id
        var product_id = $("#product_details_id_input").val();
        var xiabiao = $("#product_details_specification option:selected").val();
        var count = $('.product_details_count input').val()
        var result = 0
        console.log(product_id);
        console.log(xiabiao)
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
    })

    $("body").on('change','.product_details_count',function(){

        var product_id = $("#product_details_id_input").val();
        var xiabiao = $("#product_details_specification option:selected").val();
        var count = $('.product_details_count input').val()
        var result = 0
        console.log(product_id);
        console.log(xiabiao)
        var this_str = ""
        for(var i = 0; i < datas.length; i++){
            if(datas[i].id == product_id){
                var this_arr = datas[i].price.split(",")
                result = count*this_arr[xiabiao]
                $(".product_details_price input").val(result)
            }
        }
        result = count*this_arr[xiabiao]
        $(".product_details_price input").val(result)
    })

    // 给全部按钮添加样式
    $("body").on('click','#Bmenu_showAll',function (){
        tableShow()
    })

    $("body").on('click','.search-btn',function (){
        tableLitterShow()
    })

    // 生成装饰粒子
    function createParticles() {
        const particleCount = 30;
        document.querySelectorAll('.advanced-container').forEach(container => {
            // 为每个容器独立生成粒子
            const id = container.dataset.bgId;


            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');

                // 随机大小 (2px - 8px)
                const size = Math.random() * 6 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;

                // 随机位置
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;

                // 随机动画延迟和持续时间
                particle.style.animationDelay = `${Math.random() * 15}s`;
                particle.style.animationDuration = `${Math.random() * 10 + 10}s`;

                container.appendChild(particle);
            }
        });
    }

    function updateDateTime() {
        const now = new Date();
        const timeElement = document.querySelector('.xinxi h3:nth-child(2)');

        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');

        timeElement.innerHTML = `<i class="fas fa-clock"></i> 当前时间：${year}/${month}/${day} ${hours}:${minutes}:${seconds}`;
    }

    // 初始更新一次
    updateDateTime();

    // 每秒更新一次时间
    setInterval(updateDateTime, 1000);


    // JavaScript功能实现 - 修正版
    let inactivityTimer;
    let carouselInterval;
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const overlay = document.querySelector('.inactive-overlay');

    // 重置不操作计时器
    function resetInactivityTimer() {
        clearTimeout(inactivityTimer);
        inactivityTimer = setTimeout(showOverlay, 1200000); // 10秒测试用，正式改为300000（5分钟）
    }

    // 显示覆盖层
    function showOverlay() {
        overlay.classList.add('active');
        startCarousel();
    }

    // 隐藏覆盖层
    function hideOverlay() {
        overlay.classList.remove('active');
        stopCarousel();
        resetInactivityTimer();
    }

    // 启动轮播
    function startCarousel() {
        currentSlide = 0;
        showSlide(currentSlide);
        // 清除之前的定时器避免重复
        stopCarousel();
        // 启动新的定时器
        carouselInterval = setInterval(nextSlide, 5000); // 3秒切换一次
    }

    // 停止轮播
    function stopCarousel() {
        clearInterval(carouselInterval);
    }

    // 显示指定幻灯片
    function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));

        slides[index].classList.add('active');
        currentSlide = index;

        // 更新指示点
        updateDots();
    }

    // 更新指示点
    function updateDots() {
        const dots = document.querySelectorAll('.carousel-dots .dot');
        dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentSlide);
        });
    }

    // 下一张幻灯片
    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    // 上一张幻灯片
    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
        // 创建轮播点
        const dotsContainer = document.querySelector('.carousel-dots');
        slides.forEach((_, index) => {
            const dot = document.createElement('div');
            dot.className = 'dot';
            if (index === 0) dot.classList.add('active');
            dot.addEventListener('click', () => {
                showSlide(index);
                // 点击点时重置轮播计时
                resetCarouselTimer();
            });
            dotsContainer.appendChild(dot);
        });

        // 事件监听
        document.querySelector('.prev-btn').addEventListener('click', () => {
            prevSlide();
            resetCarouselTimer();
        });

        document.querySelector('.next-btn').addEventListener('click', () => {
            nextSlide();
            resetCarouselTimer();
        });

        document.querySelector('.close-overlay').addEventListener('click', hideOverlay);

        // 点击覆盖层其他区域也可关闭
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                hideOverlay();
            }
        });

        // 用户操作重置计时器
        const userEvents = ['mousemove', 'keypress', 'click', 'scroll', 'touchstart'];
        userEvents.forEach(event => {
            document.addEventListener(event, resetInactivityTimer);
        });

        // 重置轮播定时器
        function resetCarouselTimer() {
            stopCarousel();
            carouselInterval = setInterval(nextSlide, 3000);
        }

        // 启动计时器
        resetInactivityTimer();
    });

    // 添加页面可见性检测
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            // 页面不可见时暂停轮播
            stopCarousel();
        } else if (overlay.classList.contains('active')) {
            // 页面可见且覆盖层显示时恢复轮播
            resetCarouselTimer();
        }
    });


    let cachedTableNumber = null;
    function huoqutable() {
        const urlParams = new URLSearchParams(window.location.search);
        const tableNumber = urlParams.get('table');

        console.log("获取到的桌号参数:", tableNumber);

        // 如果URL参数不存在，则从存储获取（作为备用方案）
        if(!cachedTableNumber) {
            cachedTableNumber = sessionStorage.getItem('currentTableNumber') ||
                localStorage.getItem('currentTableNumber');
        }



        // 更新UI显示
        const tableDisplay = document.getElementById('tableDisplay');

        if(cachedTableNumber) {

            sendSearchRequest(cachedTableNumber)
            tableDisplay.textContent = cachedTableNumber;

            sessionStorage.removeItem('currentTableNumber');
            localStorage.removeItem('currentTableNumber');

        } else {
            tableDisplay.textContent = '未指定桌号';
        }

    }


    document.addEventListener('DOMContentLoaded', function() {



        huoqutable()

    });


    // function sendSearchRequest(cachedTableNumber) {
    //     $.ajax({
    //         type: 'post',
    //         url: '/order_table/selectsea',
    //         async: false,
    //         timeout: 5000,
    //         data: {
    //             zh: cachedTableNumber
    //         },
    //         success: function(res) {
    //             sessionStorage.removeItem('currentTableNumber');
    //             localStorage.removeItem('currentTableNumber');
    //
    //             jiezhangdanhao = res.data[0].bm;
    //
    //             if(jiezhangdanhao){
    //                 // 页面完全加载后执行AJAX请求
    //                 $.ajax({
    //                     type: 'post',
    //                     url: '/order_table/selectdanhao',
    //                     async: false,
    //                     timeout: 5000,
    //                     data: {
    //                         ddid: jiezhangdanhao
    //                     },
    //                     success: function(res) {
    //                         console.log("历史订单查询", res);
    //
    //                         if (res.success && res.data && res.data.length > 0) {
    //                             // 设置单号
    //                             $('#danhao').val(res.data[0].ddid);
    //
    //                             // 清空表格
    //                             $('#table tbody').empty();
    //
    //                             // 遍历数据并构建表格行 - 修改为与结算按钮相同的格式
    //                             $.each(res.data, function(index, item) {
    //                                 // 使用与结算按钮完全相同的格式构建行
    //                                 var rowHtml = "" +
    //                                     "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
    //                                     "<td class=\"itemOrderNo\">" + (index + 1) + "</td>" +
    //                                     "<td class=\"itemName\">" + (item.cpmc || "") + "</td>" +
    //                                     "<td class=\"itemNum\">" +
    //                                     "<span class=\"count\">" + (item.gs || 1) + "</span>" +
    //                                     "/" +
    //                                     "<span class=\"unit\">" + (item.dw || "瓶") + "</span>" +
    //                                     "</td>" +
    //                                     "<td class=\"itemAmount\">" +
    //                                     "￥" +
    //                                     "<span class=\"price\">" + (parseFloat(item.zhje) || 0).toFixed(2) + "</span>" +
    //                                     "</td>" +
    //                                     "<td class=\"itemid\" style='visibility: hidden;width: 0px;margin: 0;padding: 0'>" +
    //                                     "<span class=\"id\">" + (item.id || "") + "</span>" +
    //                                     "</td>" +
    //                                     "</tr>";
    //
    //                                 // 添加到表格
    //                                 $('#table tbody').append(rowHtml);
    //                             });
    //
    //                             // 调用表格汇总函数
    //                             Table_sum();
    //                         }
    //                     },
    //                     error: function(xhr, status, error) {
    //                         console.error('请求失败:', error);
    //                         if (status == "timeout") {
    //                             alert("网络超时，请稍后再试");
    //                         } else {
    //                             alert("网络错误，请稍后再试");
    //                         }
    //                     }
    //                 });
    //             }
    //         },
    //         error: function(xhr, status, error) {
    //             console.error('请求失败:', error);
    //             if (status == "timeout") {
    //                 alert("网络超时，请稍后再试");
    //             } else {
    //                 alert("网络错误，请稍后再试");
    //             }
    //             $('.tables-grid').html('<div class="no-data">数据加载失败</div>');
    //         }
    //     });
    // }

    var globalTableBanhao;
    var zhuohao;

    $('.jiesuan').on('click', function() {
        uptableJS(globalTableBanhao)
        uptableRequest1(zhuohao)
        location.reload();

    });

    function uptableJS(globalTableBanhao) {
        $.ajax({
            type: 'post',
            url: '/order_table/updatejs',
            async: false,
            timeout: 5000,
            data: {
                ddid: globalTableBanhao
            },
            success: function(res) {
                console.log("筛选请求结果", res);
                selectAll()
            },
            error: function(res) {
                if (res.status == "timeout") {
                    alert("网络超时，请稍后再试");
                } else {
                    alert("网络错误，请稍后再试");
                }
                // 错误时显示提示
                $('.tables-grid').html('<div class="no-data">数据加载失败</div>');
            }
        });
    }

    function uptableRequest1(zhuohao) {
        $.ajax({
            type: 'post',
            url: '/order_table/updatetale1',
            async: false,
            timeout: 5000,
            data: {
                zh: zhuohao
            },
            success: function(res) {
                console.log("筛选请求结果", res);
                selectAll()
            },
            error: function(res) {
                if (res.status == "timeout") {
                    alert("网络超时，请稍后再试");
                } else {
                    alert("网络错误，请稍后再试");
                }
                // 错误时显示提示
                $('.tables-grid').html('<div class="no-data">数据加载失败</div>');
            }
        });
    }

    function sendSearchRequest(cachedTableNumber) {
        zhuohao = cachedTableNumber;
        $.ajax({
            type: 'post',
            url: '/order_table/selectsea',
            async: false,
            timeout: 5000,
            data: {
                zh: cachedTableNumber
            },
            success: function(res) {
                sessionStorage.removeItem('currentTableNumber');
                localStorage.removeItem('currentTableNumber');

                jiezhangdanhao = res.data[0].bm;

                if(jiezhangdanhao){
                    // 页面完全加载后执行AJAX请求
                    $.ajax({
                        type: 'post',
                        url: '/order_table/selectdanhao',
                        async: false,
                        timeout: 5000,
                        data: {
                            ddid: jiezhangdanhao
                        },
                        success: function(res) {
                            console.log("历史订单查询", res);

                            if (res.success && res.data && res.data.length > 0) {
                                // 设置单号
                                $('#danhao').val(res.data[0].ddid);

                                globalTableBanhao = res.data[0].ddid;

                                // 清空表格
                                $('#table tbody').empty();

                                // 遍历数据并构建表格行 - 与点击事件完全相同的格式
                                $.each(res.data, function(index, item) {
                                    // 新增商品的序号
                                    var product_now_id = parseInt($(".index .Lblock #empty_mask .cont .table tbody tr").length + parseInt("1"));

                                    // 使用与点击事件完全相同的格式构建行
                                    var rowHtml = "" +
                                        "<tr class=\"success\" ondblclick=\"ondblclick_f(this)\">" +
                                        "<td class=\"itemOrderNo\">" + (index + 1) + "</td>" +
                                        "<td class=\"itemName\">" + (item.cpmc || "") + "</td>" +
                                        "<td class=\"itemNum\">" +
                                        "<span class=\"count\">" + (item.gs || 1) + "</span>" +
                                        "/" +
                                        "<span class=\"unit\">" + (item.dw || "瓶") + "</span>" +
                                        "</td>" +
                                        "<td class=\"itemAmount\">" +
                                        "￥" +
                                        "<span class=\"price\">" + (parseFloat(item.zhje) || 0).toFixed(2) + "</span>" +
                                        "</td>" +
                                        "<td class=\"itemid\" style='visibility: hidden;width: 0px;margin: 0;padding: 0'>" +
                                        "<span class=\"id\">" + (item.product_id || "") + "</span>" +
                                        "</td>" +
                                        "</tr>";

                                    // 添加到表格
                                    $('#table tbody').append(rowHtml);
                                });

                                // 调用表格汇总函数
                                Table_sum();

                                // 添加这两行代码，确保与点击事件完全一致
                                jQuery('#Product_detail').hide();
                                jQuery('.jiezhang_mask').hide();
                            }
                        },
                        error: function(xhr, status, error) {
                            console.error('请求失败:', error);
                            if (status == "timeout") {
                                alert("网络超时，请稍后再试");
                            } else {
                                alert("网络错误，请稍后再试");
                            }
                        }
                    });
                }
            },
            error: function(xhr, status, error) {
                console.error('请求失败:', error);
                if (status == "timeout") {
                    alert("网络超时，请稍后再试");
                } else {
                    alert("网络错误，请稍后再试");
                }
                $('.tables-grid').html('<div class="no-data">数据加载失败</div>');
            }
        });
    }

    // 获取当前桌号的公共方法
    function getCurrentTableNumber() {
        return cachedTableNumber || '未指定桌号';
    }


    $('#guazhang').on('click', function() {

        console.log("add")
        var pro_list = []
        var pro_num = $("#danhao").val();
        var member_name=p_name
        var member_username=p_username

        $("#table1 tbody tr").each(function () {
            var id = $(this).children().eq(0).text();
            var jine = $(this).children(".itemAmount1").children().eq(0).text();
            jine = jine.replace("￥","")
            var shul= $(this).children(".itemNum1").children().eq(0).text();
            var zhek= $(this).children(".itemzheko").children().eq(0).text();

            console.log(jine)
            console.log(shul)
            console.log(zhek)
            for(var i=0; i<datas.length;i++){
                if(datas[i].product_name == id){
                    pro_list.push({
                        member_name:member_name,
                        member_username:member_username,
                        cplx:datas[i].type,
                        cpmc:datas[i].product_name,
                        dw:datas[i].unit,
                        dj:datas[i].price,
                        dzbl:zhek,
                        // zhdj:zhehou / num,
                        zhdj:jine*zhek/shul,
                        // zhje:zhehou,
                        zhje:jine*zhek*shul/shul,
                        gs:shul
                    })
                }

            }
        })

        jQuery("#jiezhang").hide()
        jQuery(".jiezhang_mask").hide()
        $(".Lblock #empty_mask .cont table tr").remove()
        console.log(pro_list)
        console.log(pro_num)
        var yingshouValue = parseFloat($('#yingshou_Sum').text()) || 0;
        var shijiValue = parseFloat($('#shiji').text()) || 0;
        var youhuiValue = parseFloat($('#youhui').val()) || 0;



        $.ajax({
            type: 'post',
            url: '/order_panel/addguazhang',
            timeout: 5000,
            data: {
                pro_list: JSON.stringify(pro_list),
                pro_num: pro_num,
                member_name:member_name,
                member_username,
                youhui: p_zhekou,
                yhje:youhuiValue,
                ssje:shijiValue,
                xfje:yingshouValue
            },
            success: function(res){
                let result = JSON.parse(res)
                alert(result.msg)
                tableShow();
                orders_auto();
            },
            error: function(res){
                if(res.status == "timeout"){
                }else{
                }
            }
        });
        location.replace(location.href);
    })



    // 初始化效果
    window.addEventListener('DOMContentLoaded', () => {
        createParticles();
    });
</script>
</div>
</div>
</body>
</html>
<SCRIPT Language=VBScript></SCRIPT>